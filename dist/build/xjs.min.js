/**
* @license
*
* XSplit Extensibility Framework and Plugin License
*
* Copyright (c) 2015, SplitmediaLabs Limited
* All rights reserved.
*
* Redistribution and use in source, minified or binary forms, with or without
* modification, are permitted provided that the following conditions are met:
*
* 1. Redistributions of source code must retain the above copyright notice, this
*    list of conditions and the following disclaimer.
*
* 2. Redistributions in minified or binary form must reproduce the above
*    copyright notice, this list of conditions and the following disclaimer in the
*    documentation and/or other materials provided with the distribution.
*
* 3. This software, in source, minified and binary forms, and any derivatives
*    hereof, may be used only with the purpose to extend the functionality of the
*    XSplit products, developed and published by SplitmediaLabs Limited. It may
*    specifically not be used for extending the functionality of any other software
*    products which enables live streaming and/or recording functions.
*
* 4. This software may not be used to circumvent paid feature restrictions for
*    free and personal licensees of the XSplit products.
*
* THIS SOFTWARE IS PROVIDED BY SPLITMEDIALABS LIMITED ''AS IS'' AND ANY EXPRESS OR
* IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
* MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
* SHALL SPLITMEDIALABS LIMITED BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
* SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
* PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
* BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
* CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
* IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
* OF SUCH DAMAGE.
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e["xjs-framework"]={})}(this,function(exports){"use strict";function __extends(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function versionCompare(e){var t=e.split("."),n=function(e,n,r){return t[r]<n&&-1!==e||1===e?1:t[r]>n||-1===e?-1:0};return{is:{lessThan:function(e){return 1===e.split(".").reduce(n,t[0])},greaterThan:function(e){return-1===e.split(".").reduce(n,t[0])},equalsTo:function(e){return 0===e.split(".").reduce(n,t[0])},greaterThanOrEqualTo:function(e){var r=e.split(".");return-1===r.reduce(n,t[0])||0===r.reduce(n,t[0])}}}}function setMockVersion(e){mockVersion=e}function getVersion(){var e=/XSplit Broadcaster\s(.*?)\s/,t=navigator.appVersion.match(e);if(null!==(t=t||mockVersion.match(e)))return t[1];throw new Error("not loaded in XSplit Broadcaster")}function resolveRelativePath(e,t){if("http://"===e.substring(0,7)||"https://"===e.substring(0,8))return e;if("//"===e.substring(0,2))return t.split("://")[0]+":"+e;if("../"===e.substring(0,3)){for(var n=0;"../"===e.substring(0,3);)e=e.substring(3),++n;var r=t.split("/");return(r=r.slice(0,length-1-n)).push(e),r.join("/")}"./"===e.substring(0,2)&&(e=e.substring(2));var o=t.split("/");return o[o.length-1]=e,o.join("/")}function readMetaConfigUrl(){return new Promise(function(e){if(Environment.isSourcePlugin()){var t={};new Promise(function(e){exec("GetLocalPropertyAsync","prop:BrowserConfiguration",function(t){e(t)})}).then(function(n){try{""!==n&&"null"!==n||(n=exec("GetConfiguration")),t=JSON.parse(n)}catch(e){}finally{for(var r=document.getElementsByTagName("meta"),o=r.length-1;o>=0;o--)if("xsplit:config-url"===r[o].name){var i=resolveRelativePath(r[o].content,window.location.href);t.configUrl=i;var s={configUrl:i};Global.setPersistentConfig(s);break}exec("SetBrowserProperty","Configuration",JSON.stringify(t)),e()}})}else e()})}function getCurrentSourceId(){return new Promise(function(e){Environment.isSourceProps()||Environment.isSourcePlugin()&&versionCompare(getVersion()).is.lessThan(minVersion)?exec("GetLocalPropertyAsync","prop:id",function(t){var n=t;Item.setBaseId(n),(Environment.isSourcePlugin()||Environment.isSourceProps())&&Item.lockSourceSlot(n),e()}):e()})}function informWhenConfigLoaded(){return new Promise(function(e){Environment.isSourceProps()?window.addEventListener("load",function(){try{SourcePropsWindow.getInstance().emit("config-load")}catch(e){}e()}):e()})}function init(){Global.addInitializationPromise(readMetaConfigUrl()),Global.addInitializationPromise(getCurrentSourceId()),Global.addInitializationPromise(informWhenConfigLoaded()),Promise.all(Global.getInitializationPromises()).then(function(){document.dispatchEvent(new CustomEvent("xsplit-js-ready",{bubbles:!0}))})}function finishReady(e){var t=this;return new Promise(function(n){e&&void 0!==e.version&&setMockVersion(e.version),setReady(),isReady&&!isInit&&(setOnce(),init()),void 0!==readyResolve&&"remote"===Remote.remoteType&&readyResolve.call(t,null),n(readyPromise)})}function ready(e){return new Promise(function(t,n){e&&void 0!==e.remote&&(void 0!==e.remote.type&&(Remote.remoteType=e.remote.type),void 0!==e.remote.sendMessage&&e.remote.sendMessage instanceof Function?Remote.sendMessage=e.remote.sendMessage:n(Error("Send message should be instance of function."))),"remote"===Remote.remoteType?(readyResolve=function(){t()},Remote.sendMessage("getVersion")):t(finishReady(e))})}function setReady(){isReady=!0}function setOnce(){isInit=!0}function exec(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Promise(function(r,o){var i=null,s=!1;if(n.length>0&&((i=n[n.length-1])instanceof Function?n.pop():i=null),DEBUG&&console.log(['internal.exec("',e,'") ',JSON.stringify(n)].join(" ")),"remote"===Remote.remoteType){counter++;var a={};a=n.length>=1?{funcName:e,args:n,asyncId:counter,type:"exec"}:{funcName:e,asyncId:counter,type:"exec"},Remote.sendMessage(encodeURIComponent(JSON.stringify(a)))}window.external&&window.external[e]&&window.external[e]instanceof Function&&(s=window.external[e].apply(t,n)),null!==i?"remote"===Remote.remoteType?_remoteCallbacks[counter]=i:"proxy"===Remote.remoteType?_proxyCallbacks[s]=i:_callbacks[s]=i:"remote"===Remote.remoteType&&(_remoteCallbacks[counter]=function(e){r(e)}),"proxy"===Remote.remoteType&&"number"!=typeof s?void 0!==_proxyCallbacks[s]&&r(_proxyCallbacks[s].call(t,decodeURIComponent(s))):"local"===Remote.remoteType&&r(s)})}function finalCallback(e){var t=this;return new Promise(function(n){var r=JSON.parse(e);"number"==typeof r.asyncId&&void 0!==_remoteCallbacks[r.asyncId]?_remoteCallbacks[r.asyncId].apply(t,[r.result]):n(r.result)})}function applyMixins(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){"constructor"!==n&&(e.prototype[n]=t.prototype[n])})})}var Color=function(){function e(e){if(void 0!==e.rgb)this.setRgb(e.rgb);else if(void 0!==e.irgb)this.setIrgb(e.irgb);else if(void 0!==e.bgr)this.setBgr(e.bgr);else if(void 0!==e.ibgr)this.setIbgr(e.ibgr);else{if(void 0===e.isTransparent||!0!==e.isTransparent)throw new Error("Do not call Color constructor without parameters.");this.setTransparent()}}return e.fromRGBString=function(t){return new e({rgb:t})},e.fromRGBInt=function(t){return new e({irgb:t})},e.fromBGRString=function(t){return new e({bgr:t})},e.fromBGRInt=function(t){return new e({ibgr:t})},e.fromTransparent=function(){return new e({isTransparent:!0})},e.prototype.getRgb=function(){return this._rgb},e.prototype.setRgb=function(e){return this._rgb=e.replace(/^#/,"").toUpperCase(),this._irgb=parseInt(this._rgb,16),this._bgr=[this._rgb.substring(4,6),this._rgb.substring(2,4),this._rgb.substring(0,2)].join("").toUpperCase(),this._ibgr=parseInt(this._bgr,16),this._transparent=!1,this},e.prototype.getBgr=function(){return this._bgr},e.prototype.setBgr=function(e){return this.setRgb([e.substring(4,6),e.substring(2,4),e.substring(0,2)].join("")),this},e.prototype.getIrgb=function(){return this._irgb},e.prototype.setIrgb=function(e){for(var t=e.toString(16);t.length<6;)t="0"+t;return this.setRgb(t),this},e.prototype.getIbgr=function(){return this._ibgr},e.prototype.setIbgr=function(e){for(var t=e.toString(16);t.length<6;)t="0"+t;return this.setBgr(t),this},e.prototype.setTransparent=function(){return this._rgb="0",this._irgb=0,this._bgr="0",this._ibgr=0,this._transparent=!0,this},e.prototype.isTransparent=function(){return this._transparent},e}(),Rectangle=function(){function e(){}return e.prototype.getTop=function(){return this._top},e.prototype.setTop=function(e){return this._top=e,void 0!==this._bottom&&this._height!==this._top-this._bottom?this.setHeight(Math.abs(this._top-this._bottom)):void 0!==this._height&&this._bottom!==this._top+this._height&&this.setBottom(this._top+this._height),this},e.prototype.getLeft=function(){return this._left},e.prototype.setLeft=function(e){return this._left=e,void 0!==this._right&&this._width!==Math.abs(this._right-this._left)?this.setWidth(Math.abs(this._right-this._left)):void 0!==this._width&&this._height!==this._left+this._width&&this.setRight(this._left+this._width),this},e.prototype.getRight=function(){return this._right},e.prototype.setRight=function(e){return this._right=e,void 0!==this._left&&this._width!==Math.abs(this._right-this._left)?this.setWidth(Math.abs(this._right-this._left)):void 0!==this._width&&this._left!==this._right-this._width&&this.setLeft(this._right-this._width),this},e.prototype.getBottom=function(){return this._bottom},e.prototype.setBottom=function(e){return this._bottom=e,void 0!==this._top&&this._height!==Math.abs(this._top-this._bottom)?this.setHeight(Math.abs(this._top-this._bottom)):void 0!==this._height&&this._top!==this._bottom-this._height&&this.setTop(this._bottom-this._height),this},e.prototype.getWidth=function(){return this._width},e.prototype.setWidth=function(e){return this._width=e,void 0!==this._right&&this._left!==this._right-this._width?this.setLeft(this._right-this._width):void 0!==this._left&&this._right!==this._left+this._width&&this.setRight(this._left+this._width),this},e.prototype.getHeight=function(){return this._height},e.prototype.setHeight=function(e){return this._height=e,void 0!==this._top&&this._bottom!==this._top+this._height?this.setBottom(this._top+this._height):void 0!==this._bottom&&this._top!==this._bottom-this._height&&this.setTop(this._bottom-this._height),this},e.fromDimensions=function(t,n){if(t<0||n<0)throw new Error("Rectangle dimensions cannot be negative.");var r=new e;return r._width=t,r._height=n,r},e.fromCoordinates=function(t,n,r,o){if(n>o)throw new Error("Top coordinate must be smaller than bottom.");if(t>r)throw new Error("Right coordinate must be smaller than left.");var i=new e;return i._top=n,i._left=t,i.setRight(r),i.setBottom(o),i},e.prototype.toDimensionString=function(){return this._width+","+this._height},e.prototype.toCoordinateString=function(){if([this._left,this._right,this._top,this._bottom].indexOf(void 0)>-1)throw new Error("This Rectangle instance does not have coordinates.");return this._left+","+this._top+","+this._right+","+this._bottom},e.prototype.toString=function(e){if(void 0===e)return this.toDimensionString();var t=e;return t=t.replace(":left",String(this._left)),t=t.replace(":top",String(this._top)),t=t.replace(":right",String(this._right)),t=t.replace(":bottom",String(this._bottom)),t=t.replace(":width",String(this._width)),t=t.replace(":height",String(this._height))},e}(),minVersion="2.8.1603.0401",deleteSceneEventFixVersion="2.8.1606.1601",addSceneEventFixVersion="2.8.1606.1701",handlePreStreamDialogFixVersion="3.1.1707.3101",globalsrcMinVersion="2.9",itemSubscribeEventVersion="2.9.1608.2301",mockVersion="",Environment=function(){function e(){}return e.initialize=function(){e._initialized||(e._isSourcePlugin=window.external&&void 0!==window.external.GetConfiguration,e._isSourceProps=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0!==window.external.GetViewId(),e._isExtension=window.external&&void 0===window.external.GetConfiguration&&void 0!==window.external.GetViewId&&void 0===window.external.GetViewId(),e._initialized=!0)},e.isSourcePlugin=function(){return e._isSourcePlugin},e.isSourceProps=function(){return e._isSourceProps},e.isExtension=function(){return"remote"===Remote.remoteType||e._isExtension},e}();Environment.initialize();var XML=function(){function e(t){var n="";void 0===t.value&&(t.value="");for(var r in t)e.RESERVED_ATTRIBUTES.test(r)||void 0===t[r]||(n+=[" ",r,'="',t[r],'"'].join(""));void 0===t.children&&(t.children=[]);for(var o=0,i=t.children;o<i.length;o++){var s=i[o];t.value+=new e(s).toString()}!0===t.selfclosing?this.xml=["<",t.tag,n,"/>"].join(""):this.xml=["<",t.tag,n,">",t.value,"</",t.tag,">"].join("")}return e.prototype.toString=function(){return this.xml},e.parseJSON=function(t){return new e(t)},e.encode=function(e){return e.replace(/[&<>'']/g,function(e){return"&"+{"&":"amp","<":"lt",">":"gt","'":"quot",'"':"#39"}[e]+";"})},e.RESERVED_ATTRIBUTES=/^(children|tag|value|selfclosing)$/i,e}(),JSON$1=function(){function e(t){if(void 0!==t&&""!==t){var n=t;t instanceof XML&&(n=t.toString());var r=/<([^\s>\/]+)/g,o=/(\/>)/g,i=r.exec(n),s=o.exec(n);n=n.replace(/&/g,"&amp;");var a=(new DOMParser).parseFromString(n,"application/xml");if(a.getElementsByTagName("parsererror").length>0)throw new Error("XML parsing error. Invalid XML string");return function t(a){var c=new e;c.tag=a.tagName,null===(i=r.exec(n))&&0===o.lastIndex||(null===i&&o.lastIndex>0?(c.selfclosing=!0,s=o.exec(n)):null!==i&&o.lastIndex>r.lastIndex||null!==i&&o.lastIndex<r.lastIndex&&o.lastIndex===r.lastIndex-i[0].length&&(c.selfclosing=!0,s=o.exec(n)));for(var u=0;u<a.attributes.length;u++){var p=a.attributes[u];c[p.name]=p.value}c.children=[];for(var l=0;l<a.childNodes.length;l++){var m=a.childNodes[l];m instanceof Element&&c.children.push(t(m))}return void 0===c.value&&0===c.children.length&&(delete c.children,c.value=a.textContent),c}(a.childNodes[0])}}return e.parse=function(t){return new e(t)},e}(),App=function(){function e(){}return e.get=function(e){return new Promise(function(t){exec("AppGetPropertyAsync",e,t)})},e.set=function(e,t){return new Promise(function(n){exec("AppSetPropertyAsync",e,t,function(e){n(!(Number(e)<0))})})},e.getAsList=function(t){return new Promise(function(n,r){e.get(t).then(function(e){try{var t=JSON$1.parse(e),o=[];t.children&&t.children.length>0&&(o=t.children),n(o)}catch(e){r(e)}})})},e.getGlobalProperty=function(e){return new Promise(function(t){exec("GetGlobalProperty",e).then(function(e){t(e)})})},e.callDll=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=[].slice.call(arguments);return new Promise(function(e){o.unshift("CallDll"),exec.apply(t,o).then(function(t){e(t)})})},e.callFunc=function(e,t){return new Promise(function(n){exec("AppCallFuncAsync",e,t,function(e){n(e)})})},e.postMessage=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Promise(function(r){n.unshift(e),n.unshift("PostMessageToParent"),n.push(function(e){r(e)}),exec.apply(t,n)})},e}(),Item=function(){function e(){}return e.attach=function(t,n){var r=this;return new Promise(function(o){var i=e.itemSlotMap.indexOf(t);-1===i&&(i=++e.lastSlot%e.MAX_SLOTS,e.islockedSourceSlot&&0===i&&++i,e.lastSlot=i,e.itemSlotMap[i]=t),Environment.isSourcePlugin()?versionCompare(getVersion()).is.greaterThan(minVersion)?exec("AttachVideoItem"+(i+1),t):exec("AttachVideoItem"+("0"===String(i)?"":i+1),t):exec("SearchVideoItem"+("0"===String(i)?"":i+1),t),n?n.call(r,i):o(i)})},e.lockSourceSlot=function(t){void 0!==t?(e.islockedSourceSlot=!0,e.itemSlotMap[0]=t):(e.islockedSourceSlot=!1,e.itemSlotMap[0]="")},e.wrapGet=function(t,n,r,o){return new Promise(function(i){versionCompare(getVersion()).is.lessThan(minVersion)?e.get(t,r).then(function(e){i(e)}):e.get("itemlist",r).then(function(e){return new Promise(function(t){var i=e.split(",");if(i.indexOf(r)>-1&&i.length>0&&"null"!==i[0])t(i[0]);else{var s,a;App.getAsList("presetconfig").then(function(e){for(var t=0;t<e.length;t++){if(void 0!==e[t].children)for(var r=0;r<e[t].children.length;r++)if(e[t].children[r].srcid===n){a=t,s=e[t].children[r].id;break}if(void 0!==s)break}return void 0!==s?new Promise(function(e){e("")}):new Promise(function(e,t){App.getAsList("presetconfig:i12").then(function(t){for(var r="",o=0;o<t.length;++o)if(t[o].srcid===n){r=t[o].id;break}e(r)}).catch(function(e){t(e)})})}).then(function(e){""!==e&&(s=e,a="i12"),void 0!==s?(o(s,a),t(s)):t(r)}).catch(function(e){t(r)})}})}).then(function(n){e.get(t,n).then(function(e){i(e)})})})},e.get=function(t,n){return new Promise(function(r){var o=versionCompare(getVersion()).is.greaterThan(minVersion),i=function(e){(!Environment.isSourcePlugin()&&"0"===String(e)||Environment.isSourcePlugin()&&"0"===String(e)&&!o)&&(e=-1),exec("GetLocalPropertyAsync"+("-1"===String(e)?"":Number(e)+1),t,function(e){r(e)})};n?e.attach(n,i):i(-1)})},e.wrapSet=function(t,n,r,o,i){return new Promise(function(s){versionCompare(getVersion()).is.lessThan(minVersion)?e.set(t,n,o).then(function(e){s(e)}):e.get("itemlist",o).then(function(e){return new Promise(function(t){var n=e.split(",");if(n.indexOf(o)>-1&&n.length>0&&"null"!==n[0])t(n[0]);else{var s,a;App.getAsList("presetconfig").then(function(e){for(var t=0;t<e.length;t++){if(void 0!==e[t].children)for(var n=0;n<e[t].children.length;n++)if(e[t].children[n].srcid===r){a=t,s=e[t].children[n].id;break}if(void 0!==s)break}return void 0!==s?new Promise(function(e){e("")}):new Promise(function(e,t){App.getAsList("presetconfig:i12").then(function(t){for(var n="",o=0;o<t.length;++o)if(t[o].srcid===r){n=t[o].id;break}e(n)}).catch(function(e){t(e)})})}).then(function(e){""!==e&&(s=e,a="i12"),void 0!==s?(i(s,a),t(s)):t(o)}).catch(function(e){t(o)})}})}).then(function(r){e.set(t,n,r).then(function(e){s(e)})})})},e.set=function(t,n,r){return new Promise(function(o){var i;(void 0!==r&&null!==r?new Promise(function(t){e.attach(r).then(function(e){t(e)})}):new Promise(function(e){e(-1)})).then(function(e){i=e;var r=versionCompare(getVersion()).is.greaterThan(minVersion);(!Environment.isSourcePlugin()&&"0"===String(i)||Environment.isSourcePlugin()&&"0"===String(i)&&!r)&&(i=-1),exec("SetLocalPropertyAsync"+("-1"===String(i)?"":i+1),t,n,function(e){o(!(Number(e)<0))})})})},e.setBaseId=function(t){e.baseID=t},e.getBaseId=function(){return e.baseID},e.MAX_SLOTS=2,e.lastSlot=e.MAX_SLOTS-1,e.itemSlotMap=[],e.islockedSourceSlot=!1,e}(),Global=function(){function e(){}return e.addInitializationPromise=function(t){e.initialPromises.push(t)},e.getInitializationPromises=function(){return e.initialPromises},e.setPersistentConfig=function(t){e.persistedConfig=t},e.getPersistentConfig=function(){return e.persistedConfig},e.persistedConfig={},e.initialPromises=[],e}(),EventEmitter=function(){function e(){this._handlers={}}return e.prototype.on=function(t,n,r){if("remote"===Remote.remoteType){var o=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),i={event:t,id:r,type:"event-emitter"};void 0===e._remoteHandlers[o]&&(e._remoteHandlers[o]=[]),e._remoteHandlers[o].push(n),Remote.sendMessage(encodeURIComponent(JSON.stringify(i)))}else"proxy"===Remote.remoteType?(void 0===e._proxyHandlers[r]&&(e._proxyHandlers[r]=[]),e._proxyHandlers[r].push(n)):(void 0===this._handlers[t]&&(this._handlers[t]=[]),this._handlers[t].push(n))},e.prototype.off=function(t,n){if("remote"===Remote.remoteType){if(void 0!==e._remoteHandlers[t])for(r=e._remoteHandlers[t].length-1;r>=0;r--)e._remoteHandlers[t][r]===n&&e._remoteHandlers[t].splice(r,1)}else if("proxy"===Remote.remoteType){if(void 0!==e._proxyHandlers[t])for(r=e._proxyHandlers[t].length-1;r>=0;r--)e._proxyHandlers[t][r]===n&&e._proxyHandlers[t].splice(r,1)}else if(void 0!==this._handlers[t])for(var r=this._handlers[t].length-1;r>=0;r--)this._handlers[t][r]===n&&this._handlers[t].splice(r,1)},e.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if("proxy"===Remote.remoteType){if(void 0===e._proxyHandlers[t])return;for(var o=0,i=e._proxyHandlers[t];o<i.length;o++)(c=i[o]).apply(this,n)}else{if(void 0===this._handlers[t])return;for(var s=0,a=this._handlers[t];s<a.length;s++){var c=a[s];c.apply(this,n)}}},e._setCallback=function(t){return new Promise(function(n){void 0===e._proxyHandlers[t[0]]&&(e._proxyHandlers[t[0]]=[]),n(e._proxyHandlers[t[0]].push(t[1]))})},e._finalCallback=function(t){var n=this;return new Promise(function(r){var o=JSON.parse(decodeURIComponent(t));if(void 0!==e._remoteHandlers[o.id])for(var i=0,s=e._remoteHandlers[o.id];i<s.length;i++)s[i].apply(n,[o.result]);r()})},e._remoteHandlers={},e._proxyHandlers={},e}(),SourcePropsWindow=function(e){function t(){var n=this;if(e.call(this),!Environment.isSourceProps())throw new Error("SourcePropsWindow class is only available for source properties");if("remote"===Remote.remoteType)throw new Error("Unable to listen to SourcePropsWindow events through Remote");window.addEventListener("message",function(e){try{var t=JSON.parse(e.data)}catch(e){return}switch(t.event){case"set-selected-tab":this.emit(t.event,t.value);break;case"async-callback":this.emit(t.event,{asyncId:t.value.asyncId,result:t.value.result})}}.bind(this)),this.on("config-load",function(){n._informConfigLoaded()}),t._instance=this}return __extends(t,e),t.getInstance=function(){return void 0===t._instance&&(t._instance=new t),t._instance},t.prototype._notify=function(e){window.parent.postMessage(JSON.stringify(e),"*")},t.prototype.useFullWindow=function(){this._setRenderMode(t._MODE_FULL),this.resize(354,390)},t.prototype.useTabbedWindow=function(e){this._setRenderMode(t._MODE_TABBED),this._declareCustomTabs(e.customTabs),this._setTabOrder(e.tabOrder)},t.prototype._setRenderMode=function(e){this._mode=e,this._notify({event:"set-mode",value:e})},t.prototype._setTabOrder=function(e){this._notify({event:"set-tab-order",value:JSON.stringify(e)})},t.prototype._declareCustomTabs=function(e){this._notify({event:"set-custom-tabs",value:JSON.stringify(e)})},t.prototype._informConfigLoaded=function(){this._notify({event:"load"})},t.prototype.resize=function(e,t){this._notify({event:"resize",value:JSON.stringify({width:e,height:t})})},t.prototype.requestDialogTitleChange=function(e){this._notify({event:"change-dialog-title",value:e})},t.prototype.close=function(){return new Promise(function(e){e(exec("Close"))})},t._MODE_FULL="full",t._MODE_TABBED="embedded",t}(EventEmitter),isReady=!1,isInit=!1,readyResolve,readyPromise=new Promise(function(e){document.addEventListener("xsplit-js-ready",function(){e()}),isReady&&e()}),Extension=function(){function e(){if(!Environment.isExtension())throw new Error("Extension class can only be used on Extension Plugins");this._presName=window.location.href}return e.getInstance=function(){return void 0===e._instance&&(e._instance=new e),e._instance.getId().then(function(t){e._instance._id=String(t)}),e._instance},e.prototype.saveConfig=function(e){var t=this;return new Promise(function(n,r){"[object Object]"==={}.toString.call(e)?exec("SetPresProperty",t._presName,JSON.stringify(e)).then(function(e){n(t)}):r(Error("Configuration object should be in JSON format"))})},e.prototype.loadConfig=function(){var e=this;return new Promise(function(t){exec("GetPresProperty",e._presName,function(e){var n=""===e?{}:JSON.parse(e);t(n)})})},e.prototype.getId=function(t){var n=this;return new Promise(function(r){if(void 0===n._id)if("remote"===Remote.remoteType){var o={type:"extWindow",instance:e._instance};e._remoteCallback.ExtensionWindowID={resolve:r},Remote.sendMessage(encodeURIComponent(JSON.stringify(o)))}else"proxy"===Remote.remoteType?(e._proxyCallback.ExtensionWindowID=t,App.postMessage("8")):(e._callback.ExtensionWindowID={resolve:r},App.postMessage("8"));else r(n._id)})},e._finalCallback=function(t){return new Promise(function(n){var r=JSON.parse(decodeURIComponent(t));e._remoteCallback.ExtensionWindowID.resolve(r.result)})},e._proxyCallback={},e._remoteCallback={},e._callback={},e}(),oldSetid=window.Setid;window.Setid=function(e){"proxy"===Remote.remoteType?Extension._proxyCallback.ExtensionWindowID.call(this,e):Extension._callback.ExtensionWindowID.resolve(e),"function"==typeof oldSetid&&oldSetid(e)};var StreamInfo=function(){function e(e){this._name=e.name,this._stat=e.stat,this._channel=e.channel}return e.getActiveStreamChannels=function(){return new Promise(function(t){App.getAsList("recstat").then(function(n){if(0===n.length)t([]);else{for(var r=[],o=0;o<n.length;++o)r.push(new e({name:n[o].name,stat:n[o].children.filter(function(e){return"stat"===e.tag.toLowerCase()})[0],channel:n[o].children.filter(function(e){return"channel"===e.tag.toLowerCase()})[0]}));t(r)}})})},e.prototype.getName=function(){var e=this;return new Promise(function(t){t(e._name)})},e.prototype.getStreamDrops=function(){var e=this;return new Promise(function(t){App.get("streamdrops:"+e._name).then(function(e){var n=e.split(","),r=Number(n[0])||0;t(r)})})},e.prototype.getGOPDrops=function(){var e=this;return new Promise(function(t){var n;App.getGlobalProperty("bandwidthusage-all").then(function(r){n=JSON.parse(r);for(var o=0;o<n.length;o++)n[o].ChannelName===e._name&&t(n[o].Dropped)})})},e.prototype.getStreamRenderedFrames=function(){var e=this;return new Promise(function(t){App.get("streamdrops:"+e._name).then(function(e){var n=e.split(","),r=Number(n[1])||0;t(r)})})},e.prototype.getStreamTime=function(){var e=this;return new Promise(function(t){App.get("streamtime:"+e._name).then(function(e){var n=Number(e)/10;t(n)})})},e.prototype.getBandwidthUsage=function(){var e=this;return new Promise(function(t){var n;"Local Recording"!==e._name?App.getGlobalProperty("bandwidthusage-all").then(function(r){n=JSON.parse(r);for(var o=0;o<n.length;o++)n[o].ChannelName===e._name&&t(n[o].AvgBitrate)}):t(0)})},e}(),Output=function(){function e(e){this._name=e.name}return e.getOutputList=function(){return new Promise(function(t,n){(Environment.isExtension()?Extension.getInstance().getId():Environment.isSourcePlugin()?Item.get("itemlist").then(function(e){return e.split(",")[0]}):new Promise(function(e,t){t(Error("Outputs class is only accessible from Source Plugins and Extensions."))})).then(function(n){e._getBroadcastChannels(n).then(function(n){for(var r=JSON$1.parse(n),o=[],i=0;i<r.children.length;i++)o.push(new e({name:r.children[i].name}));t(o)})}).catch(function(e){n(e)})})},e.prototype.getName=function(){var e=this;return new Promise(function(t){t(e._name)})},e.prototype.startBroadcast=function(e){var t=this;return new Promise(function(n){versionCompare(getVersion()).is.greaterThanOrEqualTo(handlePreStreamDialogFixVersion)&&void 0!==e&&null!==e&&e.suppressPrestreamDialog?(exec("CallHostFunc","startBroadcast",t._name,"suppressPrestreamDialog=1"),n(!0)):(exec("CallHost","startBroadcast",t._name),n(!0))})},e.prototype.stopBroadcast=function(){var e=this;return new Promise(function(t){exec("CallHost","stopBroadcast",e._name),t(!0)})},e.prototype.pauseLocalRecording=function(){var t=this;return new Promise(function(n,r){"Local Recording"===t._name?StreamInfo.getActiveStreamChannels().then(function(t){e._localRecording=!1;for(var o=0;o<t.length;o++)if("Local Recording"===t[o]._name){e._localRecording=!0;break}e._localRecording?(exec("CallHost","pauseRecording"),n(!0)):r(Error("Local recording is not active."))}):r(Error("Output is not a local recording"))})},e.prototype.unpauseLocalRecording=function(){var t=this;return new Promise(function(n,r){"Local Recording"===t._name?StreamInfo.getActiveStreamChannels().then(function(t){e._localRecording=!1;for(var o=0;o<t.length;o++)if("Local Recording"===t[o]._name){e._localRecording=!0;break}e._localRecording?(exec("CallHost","unpauseRecording"),n(!0)):r(Error("Local recording is not active."))}):r(Error("Output is not a local recording"))})},e._getBroadcastChannels=function(t,n){return e._id=t,new Promise(function(t,r){if(Environment.isSourcePlugin()&&(/^{[A-F0-9\-]*}$/i.test(e._id)||r(Error("Not a valid ID format for items"))),"remote"===Remote.remoteType){var o={type:"broadcastChannels",id:e._id};Extension._remoteCallback[e._id]={resolve:t},Remote.sendMessage(encodeURIComponent(JSON.stringify(o)))}else"proxy"===Remote.remoteType?(void 0===e._proxyCallback[e._id]&&(e._proxyCallback[e._id]=[]),e._proxyCallback[e._id]=n,exec("CallHost","getBroadcastChannelList:"+e._id)):(void 0===e._callback[e._id]&&(e._callback[e._id]=[]),e._callback[e._id]={resolve:t},exec("CallHost","getBroadcastChannelList:"+e._id))})},e._finalCallback=function(t){return new Promise(function(n){var r=JSON.parse(decodeURIComponent(t));Extension._remoteCallback[e._id].resolve(r.result)})},e._callback={},e._remoteCallback={},e._proxyCallback={},e._localRecording=!1,e}(),oldSetBroadcastChannelList=window.SetBroadcastChannelList;window.SetBroadcastChannelList=function(e){"proxy"===Remote.remoteType?Output._proxyCallback[Output._id].call(this,e):Output._callback[Output._id].resolve(e),"function"==typeof oldSetBroadcastChannelList&&oldSetBroadcastChannelList(e)};var Remote=function(){function e(){}return e.receiveMessage=function(t){var n={};return new Promise(function(r,o){if("remote"===e.remoteType)if(e._isVersion||-1===t.indexOf("setVersion")){if(-1===t.indexOf("setVersion"))switch((n=JSON.parse(decodeURIComponent(t))).type){case"exec":e._execHandler(t);break;case"event-emitter":e._eventEmitterHandler(t);break;case"window":case"extWindow":case"broadcastChannels":e._allWindowHandler(t);break;default:o(Error("Call type is undefined."))}}else{e._isVersion=!0;var i=t,s=t.split("::");void 0!==s[1]&&(i=s[1]),r(finishReady({version:i}))}else if("proxy"===e.remoteType){if(void 0!==t)if("getVersion"===t)e.sendMessage("setVersion::"+window.navigator.appVersion),r(!0);else switch((n=JSON.parse(decodeURIComponent(t))).type){case"exec":e._execHandler(t);break;case"event-emitter":e._eventEmitterHandler(t);break;case"window":case"extWindow":case"broadcastChannels":e._allWindowHandler(t);break;default:o(Error("Call type is undefined."))}}else"local"===e.remoteType&&o(Error("Remote calls do not work on local mode."))})},e._execHandler=function(t){var n=this;return new Promise(function(r){if("remote"===e.remoteType)finalCallback(decodeURIComponent(t)).then(function(e){r(e)});else if("proxy"===e.remoteType){var o={};return new Promise(function(r,i){(o=JSON.parse(decodeURIComponent(t))).callback=function(t){var n={result:t,asyncId:Number(o.asyncId),type:"exec"};r(e.sendMessage(encodeURIComponent(JSON.stringify(n))))};var s=[o.funcName].concat(o.args,[o.callback]);exec.apply(n,s)})}})},e._eventEmitterHandler=function(t){var n=this;return new Promise(function(r){if("remote"===e.remoteType)EventEmitter._finalCallback(t);else if("proxy"===e.remoteType){var o=JSON.parse(decodeURIComponent(t));o.callback=function(t){var n={result:t,type:"event-emitter",id:o.id,event:o.event};r(e.sendMessage(encodeURIComponent(JSON.stringify(n))))};var i=[o.event,o.callback,o.id];EventEmitter._setCallback.call(n,i)}})},e._allWindowHandler=function(t){var n=this;return new Promise(function(r){if("remote"===e.remoteType){var o=JSON.parse(decodeURIComponent(t));"window"===o.type?IO._finalCallback(t):"extWindow"===o.type?Extension._finalCallback(t):"broadcastChannels"===o.type&&Output._finalCallback(t)}else if("proxy"===e.remoteType){var i=JSON.parse(decodeURIComponent(t));if(i.callback=function(t){var n={result:t,file:i.file,type:i.type};r(e.sendMessage(encodeURIComponent(JSON.stringify(n))))},"window"===i.type){var s=[i.file,i.callback];IO.getVideoDuration.call(n,s)}else"extWindow"===i.type?(i.instance=new Extension).getId(i.callback):"broadcastChannels"===i.type&&Output._getBroadcastChannels(i.id,i.callback)}})},e._isVersion=!1,e.remoteType="local",e}(),DEBUG=!1,_callbacks={},_proxyCallbacks={},_remoteCallbacks={},counter=0,asyncCallback=window.OnAsyncCallback;window.OnAsyncCallback=function(e,t){if("proxy"===Remote.remoteType)(n=_proxyCallbacks[e]).call(this,decodeURIComponent(t));else{var n=_callbacks[e];n instanceof Function&&n.call(this,decodeURIComponent(t))}"function"==typeof asyncCallback&&asyncCallback(e,t)};var IO=function(){function e(){}return e.getFileContent=function(e){return new Promise(function(t){t(exec("GetFileContent",e))})},e.getWebContent=function(e){return new Promise(function(t){exec("GetWebContent",e,function(e){t(e)})})},e.openUrl=function(e){return new Promise(function(t){exec("OpenUrl",e).then(function(e){t(e)})})},e.openFileDialog=function(t,n){return new Promise(function(r,o){if(Environment.isSourcePlugin())o(Error("function is not available for source"));else{var i=0;void 0!==t&&null!==t&&(!0===t.allowMultiSelect&&(i|=e._ALLOW_MULTI_SELECT),!0===t.fileMustExist&&(i|=e._FILE_MUST_EXIST),!0===t.forceShowHidden&&(i|=e._FORCE_SHOW_HIDDEN));var s="";void 0!==n&&null!==n&&void 0!==n.name&&void 0!==n.extensions&&(s=n.name+"|",s+=n.extensions.map(function(e){return"*."+e}).join(";"),s+="||"),exec("OpenFileDialogAsync",null,null,String(i),s,function(e){"null"!==e?r(e.split("|")):o(Error("File selection cancelled."))})}})},e.getVideoDuration=function(t){return new Promise(function(n,r){if(Environment.isSourcePlugin())r(Error("function is not available for source"));else if(void 0!==t)if("remote"===Remote.remoteType){var o={file:t,type:"window"};void 0===e._remoteCallback[t]&&(e._remoteCallback[t]=[]),e._remoteCallback[t].push({resolve:n,reject:r}),Remote.sendMessage(encodeURIComponent(JSON.stringify(o)))}else"proxy"===Remote.remoteType?(void 0===e._proxyCallback[t[0]]&&(e._proxyCallback[t[0]]=[]),e._proxyCallback[t[0]].push(t[1]),exec("GetVideoDuration",t[0])):(void 0===e._callback[t]&&(e._callback[t]=[]),e._callback[t].push({resolve:n,reject:r}),exec("GetVideoDuration",t));else r(new Error("No file indicated."))})},e._finalCallback=function(t){return new Promise(function(n){var r=JSON.parse(decodeURIComponent(t));void 0!==r.result?e._remoteCallback[r.file].shift().resolve(r.result):e._remoteCallback[decodeURIComponent(r.file)].shift().reject(Error("Invalid file path."))})},e._ALLOW_MULTI_SELECT=512,e._FILE_MUST_EXIST=4096,e._FORCE_SHOW_HIDDEN=268435456,e._callback={},e._remoteCallback={},e._proxyCallback={},e}(),oldOnGetVideoDuration=window.OnGetVideoDuration;window.OnGetVideoDuration=function(e,t){"proxy"===Remote.remoteType?IO._proxyCallback[decodeURIComponent(e)][0].apply(this,[Number(t),e]):(IO._callback[decodeURIComponent(e)].shift().resolve(Number(t)),0===IO._callback[decodeURIComponent(e)].length&&delete IO._callback[decodeURIComponent(e)]),"function"==typeof oldOnGetVideoDuration&&oldOnGetVideoDuration(e,t)};var oldOnGetVideoDurationFailed=window.OnGetVideoDurationFailed;window.OnGetVideoDurationFailed=function(e){"proxy"===Remote.remoteType?IO._proxyCallback[decodeURIComponent(e)][0].apply(this,[void 0,e]):(IO._callback[decodeURIComponent(e)].shift().reject(Error("Invalid file path.")),0===IO._callback[decodeURIComponent(e)].length&&delete IO._callback[decodeURIComponent(e)]),"function"==typeof oldOnGetVideoDurationFailed&&oldOnGetVideoDuration(e)};var AudioDevice=function(){function e(e){this._defaultConsole=!1,this._defaultMultimedia=!1,this._defaultCommunication=!1,e=e||{},this._id=e.id,this._name=e.name,this._adapter=e.adapter,this._adapterdev=e.adapterdev,this._dSoundGuid=e.dSoundGuid,this._dataFlow=e.dataFlow,this._state=e.state,this._defaultConsole=e.defaultConsole,this._defaultMultimedia=e.defaultMultimedia,this._defaultCommunication=e.defaultCommunication,this._level=void 0!==e.level?e.level:1,this._enable=void 0===e.enable||e.enable,this._hwlevel=void 0!==e.hwlevel?e.hwlevel:-1,this._hwenable=void 0!==e.hwenable?e.hwenable:255,this._delay=void 0!==e.delay?e.delay:0,this._mix=void 0!==e.mix?e.mix:0}return e.prototype.getId=function(){return this._id},e.prototype.getName=function(){return this._name},e.prototype.getDataFlow=function(){return this._dataFlow},e.prototype.isDefaultDevice=function(){return this._defaultConsole&&this._defaultMultimedia},e.prototype.getLevel=function(){return this._level},e.prototype._setLevel=function(e){return this._level=e,this},e.prototype.isEnabled=function(){return this._enable},e.prototype._setEnabled=function(e){return this._enable=e,this},e.prototype.getSystemLevel=function(){return this._hwlevel},e.prototype._setSystemLevel=function(e){return this._hwlevel=e,this},e.prototype.getSystemEnabled=function(){return this._hwenable},e.prototype._setSystemEnabled=function(e){return this._hwenable=e,this},e.prototype.getDelay=function(){return this._delay},e.prototype._setDelay=function(e){return this._delay=e,this},e.prototype.toString=function(){var e=new JSON$1;return e.tag="dev",e.selfclosing=!0,e.id=this.getId(),e.level=(this.getLevel()/100).toFixed(6),e.enable=this.isEnabled()?1:0,e.hwlevel=(this.getSystemLevel()/100).toFixed(6),e.hwenable=this.getSystemEnabled(),e.delay=this.getDelay(),e.mix=this._mix,XML.parseJSON(e).toString()},e.parse=function(t){var n=new e({id:t.id,name:t.name,adapter:t.adapter,adapterdev:t.adapterdev,dataFlow:t.DataFlow,state:t.State,dSoundGuid:t.DSoundGuid,defaultCommunication:"1"===t.DefaultCommunication,defaultConsole:"1"===t.DefaultConsole,defaultMultimedia:"1"===t.DefaultMultimedia,mix:t.mix});return n._setLevel(Number(void 0!==t.level?100*t.level:100))._setEnabled(void 0===t.enable||"1"===t.enable)._setSystemLevel(Number(void 0!==t.hwlevel?100*t.hwlevel:-100))._setSystemEnabled(Number(void 0!==t.hwenable?t.hwenable:255))._setDelay(Number(void 0!==t.delay?t.delay:0)),n},e.SYSTEM_LEVEL_MUTE=0,e.SYSTEM_LEVEL_ENABLE=1,e.SYSTEM_MUTE_CHANGE_NOT_ALLOWED=255,e}(),Transition=function(){function e(t,n){void 0===n&&(n=null);var r=e._transitionMap[t];if(void 0!==r)this._key=t,this._value=r;else if("stinger:"===t.substring(0,8)){if(void 0!==n&&null!==n)this._key=n;else{var o=t.split(",")[0].split("\\").pop().split("/").pop(),i=o.lastIndexOf(".webm");i>=0&&i+o.length>=o.length&&(o=o.substring(0,i));var s=o.lastIndexOf("_");s>=0&&s+o.length>=o.length&&(o=o.substring(0,s)+": "+o.substring(s+1)+"ms"),this._key=o}this._value=t}else null!==typeof n?(this._key=n,this._value=t):(this._key=t,this._value=t.toLowerCase())}return e.prototype.toString=function(){return this._value},e.prototype.toTransitionKey=function(){return this._key},e.getSceneTransitions=function(){return new Promise(function(t){var n,r=[];App.getGlobalProperty("transitions").then(function(o){n=o;try{if(""!==n){for(var i=JSON.parse(n),s=i.length-1;s>=0;s--){var a=i[s];a.hasOwnProperty("Id")&&a.hasOwnProperty("Name")&&r.push(new e(a.Id,a.Name))}t(r)}else t(r)}catch(e){throw new Error("Error retrieving available transitions")}})})},e._transitionMap={NONE:"",CLOCK:"clock",COLLAPSE:"collapse",FADE:"fade",FAN:"fan",HOLE:"hole",MOVE_BOTTOM:"move_bottom",MOVE_LEFT:"move_left",MOVE_LEFT_RIGHT:"move_left_right",MOVE_RIGHT:"move_right",MOVE_TOP:"move_top",MOVE_TOP_BOTTOM:"move_top_bottom",WAVE:"wave"},e.NONE=new e("NONE"),e.CLOCK=new e("CLOCK"),e.COLLAPSE=new e("COLLAPSE"),e.FADE=new e("FADE"),e.FAN=new e("FAN"),e.HOLE=new e("HOLE"),e.MOVE_BOTTOM=new e("MOVE_BOTTOM"),e.MOVE_LEFT=new e("MOVE_LEFT"),e.MOVE_LEFT_RIGHT=new e("MOVE_LEFT_RIGHT"),e.MOVE_RIGHT=new e("MOVE_RIGHT"),e.MOVE_TOP=new e("MOVE_TOP"),e.MOVE_TOP_BOTTOM=new e("MOVE_TOP_BOTTOM"),e.WAVE=new e("WAVE"),e}(),DEFAULT_SILENCE_DETECTION_THRESHOLD=5,DEFAULT_SILENCE_DETECTION_PERIOD=1e3,App$1=function(){function e(){}return e.prototype.getFrameTime=function(){return new Promise(function(e){App.get("frametime").then(function(t){e(Number(t))})})},e.prototype.getResolution=function(){return new Promise(function(e){App.get("resolution").then(function(t){var n=t.split(",");e(Rectangle.fromDimensions(parseInt(n[0]),parseInt(n[1])))})})},e.prototype.getViewport=function(){return new Promise(function(e){App.get("viewport").then(function(t){var n=t.split(",");e(Rectangle.fromDimensions(parseInt(n[0]),parseInt(n[1])))})})},e.prototype.getVersion=function(){return new Promise(function(e,t){var n=/XSplit Broadcaster\s(.*?)\s/,r=navigator.appVersion.match(n);null!==(r=r||mockVersion.match(n))?e(r[1]):t(Error("not loaded in XSplit Broadcaster"))})},e.prototype.getFramesRendered=function(){return new Promise(function(e){App.get("framesrendered").then(function(t){e(Number(t))})})},e.prototype.getPrimaryMic=function(){return new Promise(function(e,t){App.getAsList("microphonedev2").then(function(n){var r=n.map(function(e){return AudioDevice.parse(e)});r.length&&r.length>0?e(r[0]):t(Error("No audio device is set as primary microphone"))})})},e.prototype.getPrimarySpeaker=function(){return new Promise(function(e,t){App.getAsList("microphonedev2").then(function(n){var r=n.map(function(e){return AudioDevice.parse(e)});r.length&&r.length>1?e(r[1]):t(Error("No audio device is set as primary speaker"))})})},e.prototype.setPrimaryMicLevel=function(e){return new Promise(function(t,n){e<0&&n(Error("Volume can only be positive")),App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>0){var i=o[0];i._setLevel(e),o[0]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary microphone"))})})},e.prototype.setPrimaryMicEnabled=function(e){return new Promise(function(t,n){App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>0){var i=o[0];i._setEnabled(e),o[0]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary microphone"))})})},e.prototype.setPrimaryMicSystemLevel=function(e){return new Promise(function(t,n){e<0&&n(Error("Volume can only be positive")),App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>0){var i=o[0];i._setSystemLevel(e),o[0]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary microphone"))})})},e.prototype.setPrimaryMicSystemEnabled=function(e){return new Promise(function(t,n){0!==e&&1!==e&&255!==e&&n(Error("Value can only be 0, 1 or 255")),App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>0){var i=o[0];i._setSystemEnabled(e),o[0]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary microphone"))})})},e.prototype.setPrimaryMicDelay=function(e){return new Promise(function(t,n){e<0&&n(Error("Delay can only be positive")),App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>0){var i=o[0];i._setDelay(e),o[0]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary microphone"))})})},e.prototype.setPrimarySpeakerLevel=function(e){return new Promise(function(t,n){e<0&&n(Error("Volume can only be positive")),App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>1){var i=o[1];i._setLevel(e),o[1]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},e.prototype.setPrimarySpeakerEnabled=function(e){return new Promise(function(t,n){App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>1){var i=o[1];i._setEnabled(e),o[1]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},e.prototype.setPrimarySpeakerSystemLevel=function(e){return new Promise(function(t,n){e<0&&n(Error("Volume can only be positive")),App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>1){var i=o[1];i._setSystemLevel(e),o[1]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},e.prototype.setPrimarySpeakerSystemEnabled=function(e){return new Promise(function(t,n){0!==e&&1!==e&&255!==e&&n(Error("Value can only 0, 1 or 255")),App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>1){var i=o[1];i._setSystemEnabled(e),o[1]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},e.prototype.setPrimarySpeakerDelay=function(e){return new Promise(function(t,n){e<0&&n(Error("Delay can only be positive")),App.getAsList("microphonedev2").then(function(r){var o=r.map(function(e){return AudioDevice.parse(e)});if(o.length&&o.length>1){var i=o[1];i._setDelay(e),o[1]=i;var s="";if(Array.isArray(o))for(var a=0;a<o.length;++a)s+=o[a].toString();s="<devices>"+s+"</devices>",App.set("microphonedev2",s).then(function(e){t(e)})}else n(Error("No audio device is set as primary speaker/audio render device"))})})},e.prototype.isSilenceDetectionEnabled=function(){return new Promise(function(e){App.get("microphonegain").then(function(t){var n=JSON$1.parse(t);e("1"==n.enable)})})},e.prototype.enableSilenceDetection=function(e){return new Promise(function(t){App.get("microphonegain").then(function(n){var r=JSON$1.parse(n);r.enable=e?"1":"0",App.set("microphonegain",XML.parseJSON(r).toString()).then(function(e){t(e)})})})},e.prototype.getSilenceDetectionPeriod=function(){return new Promise(function(e){App.get("microphonegain").then(function(t){var n=JSON$1.parse(t);e(void 0!==n.latency?Number(n.latency):DEFAULT_SILENCE_DETECTION_PERIOD)})})},e.prototype.setSilenceDetectionPeriod=function(e){return new Promise(function(t,n){"number"!=typeof e?n(Error("Silence detection period must be a number")):e%1!=0?n(Error("Silence detection period must be an integer")):(e<0||e>6e4)&&n(Error("Silence detection must be in the range 0-60000.")),App.get("microphonegain").then(function(n){var r=JSON$1.parse(n);r.latency=e.toString(),App.set("microphonegain",XML.parseJSON(r).toString()).then(function(e){t(e)})})})},e.prototype.getSilenceDetectionThreshold=function(){return new Promise(function(e){App.get("microphonegain").then(function(t){var n=JSON$1.parse(t);e(void 0!==n.gain?Number(n.gain):DEFAULT_SILENCE_DETECTION_THRESHOLD)})})},e.prototype.setSilenceDetectionThreshold=function(e){return new Promise(function(t,n){"number"!=typeof e?n(Error("Silence detection threshold must be a number")):e%1!=0?n(Error("Silence detection threshold must be an integer")):(e<0||e>128)&&n(Error("Silence detection threshold must be in the range 0-128.")),App.get("microphonegain").then(function(n){var r=JSON$1.parse(n);r.gain=e.toString(),App.set("microphonegain",XML.parseJSON(r).toString()).then(function(e){t(e)})})})},e.prototype.getTransition=function(){return new Promise(function(e){App.get("transitionid").then(function(t){if(""===t)e(Transition.NONE);else{var n=Transition[t.toUpperCase()];void 0!==n?e(n):Transition.getSceneTransitions().then(function(n){var r,o,i=!1;for(o=0;o<n.length;o++)if((r=n[o]).toString()===t){i=!0;break}e(i?r:new Transition(t))}).catch(function(n){e(new Transition(t))})}})})},e.prototype.setTransition=function(e){return new Promise(function(t){App.set("transitionid",e.toString()).then(function(e){t(e)})})},e.prototype.getTransitionTime=function(){return new Promise(function(e){App.get("transitiontime").then(function(t){e(Number(t))})})},e.prototype.setTransitionTime=function(e){return new Promise(function(t){App.set("transitiontime",e.toString()).then(function(e){t(e)})})},e.prototype.clearBrowserCookies=function(){return new Promise(function(e,t){Environment.isSourcePlugin()?t(new Error("This method is not available to source plugins.")):(exec("CallHost","deletecookie:videoitemprop"),e(!0))})},e.prototype.getUserIdHash=function(){return new Promise(function(e){App.getGlobalProperty("userid").then(function(t){e(t)})})},e}(),EventManager=function(){function e(){}return e.subscribe=function(t,n){var r=this;return new Promise(function(o){(t=t instanceof Array?t:[t])instanceof Array&&t.forEach(function(t){void 0===e.callbacks[t]&&(e.callbacks[t]=[]),"OnSceneAddByUser"===t?exec("AppSubscribeEvents"):t.startsWith("itempropchange_")&&exec("ItemSubscribeEvents",t.split("_")[1]),e.callbacks[t].push(n)}),o(r)})},e.callbacks={},e}(),oldSetEvent=window.SetEvent;window.SetEvent=function(e){var t={};e.split("&").map(function(e){var n=e.split("=");t[n[0]]=n[1]}),void 0!==EventManager.callbacks[t.event]&&(EventManager.callbacks[t.event].map(function(e){e(t)}),"function"==typeof oldSetEvent&&oldSetEvent(e))};var oldAppOnEvent=window.AppOnEvent;window.AppOnEvent=function(e){void 0!==EventManager.callbacks[e]&&(EventManager.callbacks[e].map(function(t){t({event:e})}),"function"==typeof oldAppOnEvent&&oldAppOnEvent(e))};var oldOnEvent=window.OnEvent;window.OnEvent=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];void 0!==EventManager.callbacks[e+"_"+t]&&(EventManager.callbacks[e+"_"+t].map(function(e){e.apply(void 0,n)}),"function"==typeof oldOnEvent&&oldOnEvent(e))};var ChannelManager=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];n.unshift(e),t._emitter.emit.apply(t._emitter,n)},t.on=function(e,n){var r=this;Environment.isSourceProps()&&console.warn("Channel Manager: stream-related events are not received via the Source Properties"),t._emitter.on(e,function(t){try{var o=JSON.parse(decodeURIComponent(t));if(o.hasOwnProperty("ChannelName")){var i=o.ChannelName,s=JSON$1.parse(o.Settings),a=void 0,c={};"stream-end"===e?(o.Dropped=Number(o.Dropped)||0,o.NotDropped=Number(o.NotDropped)||0,o.StreamTime=Number(o.StreamTime/10)||0,o.Audio=Number(o.Audio)||0,o.Video=Number(o.Video)||0,o.Output=Number(o.Output)||0,a=JSON$1.parse('<stat video="'+o.Video+'" audio="'+o.Audio+'" output="'+o.Output+'" frmdropped="'+o.Dropped+'" frmcoded="'+o.NotDropped+'" />'),c.streamTime=o.StreamTime):"stream-start"===e&&(a=JSON$1.parse("<stat />"));var u=new StreamInfo({name:i,stat:a,channel:s});n.call(r,{error:!1,channel:u,streamTime:c.streamTime})}else if(o.hasOwnProperty("new")&&o.hasOwnProperty("old")&&"recording-renamed"===e){var p=decodeURIComponent(o.new).replace(/\\/g,"/").split("/"),l=p[p.length-1];n.call(r,{error:!1,recordingInfo:{oldName:o.old,newName:l,fullPath:decodeURIComponent(o.new)}})}}catch(e){n.call(r,{error:!0})}})},t._emitter=new t,t._proxyCallbacks={},t._remoteCallbacks={},t}(EventEmitter);EventManager.subscribe(["StreamStart","StreamEnd","RecordingRenamed"],function(e){var t;if(e.hasOwnProperty("event")&&e.hasOwnProperty("info")&&(t=e.event,"StreamStart"===e.event?t="stream-start":"StreamEnd"===e.event&&(t="stream-end"),ChannelManager.emit(t,e.info)),e.hasOwnProperty("event")&&e.hasOwnProperty("old")&&e.hasOwnProperty("new")&&(t=e.event,"RecordingRenamed"===e.event)){t="recording-renamed";var n={old:e.old,new:e.new};ChannelManager.emit(t,encodeURIComponent(JSON.stringify(n)))}});var Logger=function(){function e(){}return e.log=function(e){console.log(e)},e.warn=function(t,n,r){switch(void 0===r&&(r=!1),t){case"sourceWarning":e.warnMessage="Info: "+n+" accesses a source property, which is shared by all items linked to the source. Setting this property will affect all linked items."}r?e.onceWarningsShown[n]||(console.warn(e.warnMessage+e.onceMessage),e.onceWarningsShown[n]=!0):console.warn(e.warnMessage)},e.onceWarningsShown={},e.onceMessage=" (This warning will only be shown once.)",e}();!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.FILE=1]="FILE",e[e.LIVE=2]="LIVE",e[e.TEXT=3]="TEXT",e[e.BITMAP=4]="BITMAP",e[e.SCREEN=5]="SCREEN",e[e.FLASHFILE=6]="FLASHFILE",e[e.GAMESOURCE=7]="GAMESOURCE",e[e.HTML=8]="HTML"}(exports.ItemTypes||(exports.ItemTypes={}));var iSource=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.setName=function(e){var t=this;return new Promise(function(n){t._name=e,versionCompare(getVersion()).is.lessThan(minVersion)?Item.set("prop:name",t._name,t._id).then(function(){n(t)}):(t._isItemCall?(Logger.warn("sourceWarning","setName",!0),t._checkPromise=Item.get("itemlist",t._id)):t._checkPromise=Item.wrapGet("itemlist",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(e){var r=[];e.split(",").forEach(function(e){r.push(new Promise(function(n){Item.set("prop:name",t._name,e).then(function(){n(!0)}),Item.wrapSet("prop:name",t._name,t._srcId,e,t._updateId.bind(t))}))}),Promise.all(r).then(function(){n(t)})}))})},e.prototype.getName=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getName",!0),e._checkPromise=Item.get("prop:name",e._id)):e._checkPromise=Item.wrapGet("prop:name",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(n){e._name=String(n),t(n)})})},e.prototype.setCustomName=function(e){var t=this;return new Promise(function(n){t._cname=e,t._isItemCall?(Logger.warn("sourceWarning","setCustomName",!0),Item.set("prop:cname",t._cname,t._id).then(function(){n(t)})):Item.wrapSet("prop:cname",t._cname,t._srcId,t._id,t._updateId.bind(t)).then(function(){n(t)})})},e.prototype.getCustomName=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getCustomName",!0),Item.get("prop:cname",e._id).then(function(e){t(e)})):Item.wrapGet("prop:cname",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t(e)})})},e.prototype.getValue=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getValue",!0),e._checkPromise=Item.get("prop:item",e._id)):e._checkPromise=Item.wrapGet("prop:item",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(n){if(""===(n="null"===n?"":n))e._value="",t(n);else try{e._value=XML.parseJSON(JSON$1.parse(n)),t(e._value)}catch(r){e._value=n,t(n)}})})},e.prototype.setValue=function(e){var t=this;return new Promise(function(n){var r="string"==typeof e?e:e.toString();t._value="string"!=typeof e?JSON$1.parse(r):r,t._isItemCall?(Logger.warn("sourceWarning","setValue",!0),Item.set("prop:srcitem",r,t._id).then(function(){n(t)})):Item.wrapSet("prop:srcitem",r,t._srcId,t._id,t._updateId.bind(t)).then(function(){n(t)})})},e.prototype.getKeepLoaded=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getKeepLoaded",!0),e._checkPromise=Item.get("prop:keeploaded",e._id)):e._checkPromise=Item.wrapGet("prop:keeploaded",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(n){e._keepLoaded="1"===n,t(e._keepLoaded)})})},e.prototype.setKeepLoaded=function(e){var t=this;return new Promise(function(n){t._keepLoaded=e,t._globalsrc=e,versionCompare(getVersion()).is.lessThan(globalsrcMinVersion)&&Item.set("prop:globalsrc",t._globalsrc?"1":"0",t._id),t._isItemCall?(Logger.warn("sourceWarning","setKeepLoaded",!0),Item.set("prop:keeploaded",t._keepLoaded?"1":"0",t._id).then(function(){n(t)})):Item.wrapSet("prop:keeploaded",t._keepLoaded?"1":"0",t._srcId,t._id,t._updateId.bind(t)).then(function(){n(t)})})},e.prototype.getId=function(){var e=this;return new Promise(function(t,n){e._isItemCall?t(e._id):versionCompare(getVersion()).is.lessThan(minVersion)?n(new Error("Only available on versions above "+minVersion)):Item.wrapGet("prop:srcid",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t(e)})})},e.prototype.refresh=function(){var e=this;return new Promise(function(t){e._isItemCall?Item.set("refresh","",e._id).then(function(){t(e)}):Item.wrapSet("refresh","",e._srcId,e._id,e._updateId.bind(e)).then(function(){t(e)})})},e.prototype.getItemList=function(){var e=this;return new Promise(function(t,n){versionCompare(getVersion()).is.lessThan(minVersion)?Scene.searchItemsById(e._id).then(function(e){var n=[];n.push(e),t(n)}):(e._isItemCall?e._checkPromise=Item.get("itemlist",e._id):e._checkPromise=Item.wrapGet("itemlist",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){var n=[];String(e).split(",").forEach(function(e){n.push(new Promise(function(t){Scene.searchItemsById(e).then(function(e){t(e)}).catch(function(){return t(null)})}))}),Promise.all(n).then(function(e){t(e.filter(function(e){return null!==e}))})}))})},e.prototype.getType=function(){var e=this;return new Promise(function(t){e._isItemCall?e._checkPromise=Item.get("prop:type",e._id):e._checkPromise=Item.wrapGet("prop:type",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(n){e._type=exports.ItemTypes[exports.ItemTypes[Number(n)]],t(e._type)})})},e}(),Source=function(){function e(e){e=e||{},this._name=e.name,this._cname=e.cname,this._id=e.id,this._srcId=e.srcid,this._sceneId=e.sceneId,this._value=e.value,this._keepLoaded=e.keeploaded,this._type=Number(e.type),this._xmlparams=e,this._isItemCall=!1}return e.getCurrentSource=function(){return new Promise(function(t,n){Environment.isExtension()?n(Error("Extensions do not have sources associated with them.")):(Environment.isSourcePlugin()||Environment.isSourceProps())&&versionCompare(getVersion()).is.greaterThan(minVersion)?e.getItemList().then(function(e){e.length>0?e[0].getSource().then(function(e){t(e)}):n(Error("Cannot get item list"))}):(Environment.isSourcePlugin()||Environment.isSourceProps())&&Scene.searchItemsById(Item.getBaseId()).then(function(e){return e.getSource()}).then(function(e){t(e)})})},e.getItemList=function(){return new Promise(function(e,t){Environment.isExtension()?t(Error("Extensions do not have default items associated with them.")):versionCompare(getVersion()).is.lessThan(minVersion)?Scene.searchItemsById(Item.getBaseId()).then(function(t){var n=[];n.push(t),e(n)}):(Environment.isSourcePlugin()||Environment.isSourceProps())&&Item.get("itemlist").then(function(t){var n=[];t.split(",").forEach(function(e){n.push(new Promise(function(t){Scene.searchItemsById(e).then(function(e){t(e)}).catch(function(){return t(null)})}))}),Promise.all(n).then(function(t){e(t.filter(function(e){return null!==e}))})})})},e.getAllSources=function(){return new Promise(function(e,t){var n=[],r=[],o={},i=[],s=[];App.getAsList("presetconfig").then(function(t){for(a=0;a<t.length-1;a++)n=n.concat(t[a].children);for(var a=0;a<n.length;a++)void 0!==n[a]&&s.push(function(e){return new Promise(function(t){Scene.searchSourcesById(e).then(function(e){r=r.concat(e),t(e)}).catch(function(e){t(null)})})}(n[a].srcid));Promise.all(s).then(function(t){for(var n=0;n<r.length;n++)if(null!==r[n])for(var s in r[n])"_srcId"===s&&(o[r[n][s]]=r[n]);for(var a in o)o.hasOwnProperty(a)&&i.push(o[a]);e(i)})}).catch(function(e){t(e)})})},e}();applyMixins(Source,[iSource]);var iSourceGame=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.isSpecialOptimizationEnabled=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isSpecialOptimizationEnabled",!0),Item.get("GameCapSurfSharing",e._id).then(function(e){t("1"===e)})):Item.wrapGet("GameCapSurfSharing",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t("1"===e)})})},e.prototype.setSpecialOptimizationEnabled=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setSpecialOptimizationEnabled",!0),Item.set("GameCapSurfSharing",e?"1":"0",t._id).then(function(){n(t)})):Item.wrapSet("GameCapSurfSharing",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)).then(function(){n(t)})})},e.prototype.isShowMouseEnabled=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isShowMouseEnabled",!0),Item.get("GameCapShowMouse",e._id).then(function(e){t("1"===e)})):Item.wrapGet("GameCapShowMouse",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t("1"===e)})})},e.prototype.setShowMouseEnabled=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setShowMouseEnabled",!0),Item.set("GameCapShowMouse",e?"1":"0",t._id).then(function(){n(t)})):Item.wrapSet("GameCapShowMouse",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)).then(function(){n(t)})})},e.prototype.setOfflineImage=function(e){var t=this;return this._isItemCall&&Logger.warn("sourceWarning","setOfflineImage",!0),new Promise(function(n,r){if(t._type!==exports.ItemTypes.GAMESOURCE)r(Error("Current item should be a game item"));else if(Environment.isSourcePlugin())r(Error("Source plugins cannot update offline images of other items"));else if(t._value instanceof XML){if(new RegExp('^(([A-Z|a-z]:\\\\[^*|"<>?\n]*)|(\\\\\\\\.*?\\\\.*)|([A-Za-z]+\\\\[^*|"<>?\\n]*)).(png|gif|jpg|jpeg|tif)$').test(e)||""===e){var o=JSON$1.parse(t._value.toString());o.replace=e,t.setValue(XML.parseJSON(o)).then(function(){n(t)})}}else t.getValue().then(function(){t.setOfflineImage(e).then(function(e){n(e)})})})},e.prototype.getOfflineImage=function(){var e=this;return this._isItemCall&&Logger.warn("sourceWarning","getOfflineImage",!0),new Promise(function(t,n){e._type!==exports.ItemTypes.GAMESOURCE?n(Error("Current item should be a game item")):e.getValue().then(function(){var n=JSON$1.parse(e._value.toString());t(n.replace?n.replace:"")})})},e}(),GameSource=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Source);applyMixins(GameSource,[iSourceGame]);var Audio=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.getVolume=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getVolume",!0),e._checkPromise=Item.get("prop:volume",e._id)):e._checkPromise=Item.wrapGet("prop:volume",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t(Number(e))})})},e.prototype.setVolume=function(e){var t=this;return new Promise(function(n){e=e<0?0:e>100?100:e,t._isItemCall?(Logger.warn("sourceWarning","setVolume",!0),t._checkPromise=Item.set("prop:volume",String(e),t._id)):t._checkPromise=Item.wrapSet("prop:volume",String(e),t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.isMute=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isMute",!0),e._checkPromise=Item.get("prop:mute",e._id)):e._checkPromise=Item.wrapGet("prop:mute",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.setMute=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setMute",!0),t._checkPromise=Item.set("prop:mute",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:mute",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.isAutoMute=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isAutoMute",!0),e._checkPromise=Item.get("prop:keepaudio",e._id)):e._checkPromise=Item.wrapGet("prop:keepaudio",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("1"!==e)})})},e.prototype.setAutoMute=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setAutoMute",!0),t._checkPromise=Item.set("prop:keepaudio",e?"0":"1",t._id)):t._checkPromise=Item.wrapSet("prop:keepaudio",e?"0":"1",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.isStreamOnlyAudio=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isStreamOnlyAudio",!0),e._checkPromise=Item.get("prop:sounddev",e._id)):e._checkPromise=Item.wrapGet("prop:sounddev",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.setStreamOnlyAudio=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setStreamOnlyAudio",!0),t._checkPromise=Item.set("prop:sounddev",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:sounddev",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.isAudioAvailable=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isAudioAvailable",!0),e._checkPromise=Item.get("prop:audioavail",e._id)):e._checkPromise=Item.wrapGet("prop:audioavail",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e}(),MicrophoneDevice=function(){function e(){}return e.parse=function(t){var n=new e;return n._disp=t.disp,n._name=t.name,n},e.prototype.getDisplayId=function(){return this._disp},e.prototype.toXML=function(){var e=new JSON$1;return e.tag="item",e.item=this._disp,e.name=this._name,e.type="2",e.selfclosing=!0,XML.parseJSON(e)},e.prototype.addToScene=function(e){var t=this;return new Promise(function(n,r){var o="";("number"==typeof e||e instanceof Scene?new Promise(function(t,n){Scene.getSceneCount().then(function(r){if("number"==typeof e){var i=Math.floor(e);i>r||0===i?n(new Error("Scene not existing.")):(o="s:"+(i-1)+"|",t())}else e.getSceneNumber().then(function(e){e>r||0===e?n(new Error("Scene not existing.")):(o="s:"+(e-1)+"|",t())})})}):void 0===e?Promise.resolve():Promise.reject(new Error("Optional parameter 'scene' only accepts integers or an XJS.Scene object"))).then(function(){return App.callFunc(o+"additem",t.toXML().toString())}).then(function(){n(!0)}).catch(function(e){r(e)})})},e}(),CameraDevice=function(){function e(e){this._id=e.id,this._name=e.name}return e.prototype.getId=function(){return this._id},e.prototype.getName=function(){return this._name},e.prototype.toXML=function(){var e=new JSON$1;return e.disp=this._id,e.name=this._name,XML.parseJSON(e)},e.parse=function(t){return new e({id:t.disp.replace(/&amp;/gi,"&"),name:t.name})},e.prototype.addToScene=function(e){var t=this;return new Promise(function(n,r){var o="";("number"==typeof e||e instanceof Scene?new Promise(function(t,n){Scene.getSceneCount().then(function(r){if("number"==typeof e){var i=Math.floor(e);i>r||0===i?n(new Error("Scene not existing.")):(o="s:"+(i-1)+"|",t())}else e.getSceneNumber().then(function(e){e>r||0===e?n(new Error("Scene not existing.")):(o="s:"+(e-1)+"|",t())})})}):void 0===e?Promise.resolve():Promise.reject(new Error("Optional parameter 'scene' only accepts integers or an XJS.Scene object"))).then(function(){return App.callFunc(o+"addcamera","dev:"+t._id)}).then(function(){n(!0)}).catch(function(e){r(e)})})},e}(),Game=function(){function e(){}return e.prototype.getPid=function(){return this._pid},e.prototype.getHandle=function(){return this._handle},e.prototype.getWindowHandle=function(){return this._hwnd},e.prototype.getGapiType=function(){return this._gapitype},e.prototype.getResolution=function(){return Rectangle.fromDimensions(this._width,this._height)},e.prototype.isFullscreen=function(){return 1===this._flags},e.prototype.getWindowName=function(){return this._wndname},e.prototype.getLastFrameTimestamp=function(){return this._lastframets},e.prototype.getFpsRender=function(){return this._fpsRender},e.prototype.getFpsCapture=function(){return this._fpsCapture},e.prototype.getImageName=function(){return this._imagename},e.prototype.getReplace=function(){return this._replace},e.parse=function(t){var n=new e;return n._pid=void 0!==t.pid?parseInt(t.pid):void 0,n._handle=void 0!==t.handle?parseInt(t.handle):void 0,n._hwnd=void 0!==t.hwnd?parseInt(t.hwnd):void 0,n._gapitype=t.GapiType,n._width=void 0!==t.width?parseInt(t.width):void 0,n._height=void 0!==t.height?parseInt(t.height):void 0,n._flags=void 0!==t.flags?parseInt(t.flags):void 0,n._wndname=t.wndname,n._lastframets=void 0!==t.lastframets?parseInt(t.lastframets):void 0,n._fpsRender=void 0!==t.fpsRender?Number(t.fpsRender):void 0,n._fpsCapture=void 0!==t.fpsCapture?Number(t.fpsCapture):void 0,n._imagename=t.imagename,n._replace=t.replace,n},e.prototype.toXML=function(){var e=new JSON$1;return e.tag="src",e.pid=this._pid,e.handle=this._handle,e.hwnd=this._hwnd,e.gapitype=this._gapitype,e.width=this._width,e.height=this._height,e.flags=this._flags,e.wndname=this._wndname,e.lastframets=this._lastframets,e.selfclosing=!0,XML.parseJSON(e)},e.prototype.addToScene=function(e){var t=this;return new Promise(function(n,r){var o="";("number"==typeof e||e instanceof Scene?new Promise(function(t,n){Scene.getSceneCount().then(function(r){if("number"==typeof e){var i=Math.floor(e);i>r||0===i?n(new Error("Scene not existing.")):(o="s:"+(i-1)+"|",t())}else e.getSceneNumber().then(function(e){e>r||0===e?n(new Error("Scene not existing.")):(o="s:"+(e-1)+"|",t())})})}):void 0===e?Promise.resolve():Promise.reject(new Error("Optional parameter 'scene' only accepts integers or an XJS.Scene object"))).then(function(){return App.callFunc(o+"addgamesource","dev:"+t.toXML())}).then(function(){n(!0)}).catch(function(e){r(e)})})},e.autoDetect=function(){if(void 0===e._autoDetect){var t=e._autoDetect=new e;t._pid=0,t._handle=0,t._hwnd=0,t._gapitype="",t._width=0,t._height=0,t._flags=0,t._wndname="",t._lastframets=0,t._fpsRender=0,t._fpsCapture=0,t._imagename="",e._autoDetect.addToScene=function(e){return new Promise(function(t,n){var r="";("number"==typeof e||e instanceof Scene?new Promise(function(t,n){Scene.getSceneCount().then(function(o){if("number"==typeof e){var i=Math.floor(e);i>o||0===i?n(new Error("Scene not existing.")):(r="s:"+(i-1)+"|",t())}else e.getSceneNumber().then(function(e){e>o||0===e?n(new Error("Scene not existing.")):(r="s:"+(e-1)+"|",t())})})}):void 0===e?Promise.resolve():Promise.reject(new Error("Optional parameter 'scene' only accepts integers or an XJS.Scene object"))).then(function(){(Environment.isSourcePlugin()?new Promise(function(e){App.get("presetconfig:-1").then(function(t){var n=JSON$1.parse(t);e(n.defpos)})}):new Promise(function(e){App.get("preset:0").then(function(e){return App.get("presetconfig:"+e)}).then(function(t){var n=JSON$1.parse(t);e(n.defpos)})})).then(function(e){var t,n='<item GameCapTrackActive="1" GameCapTrackActiveFullscreen="0" item="&lt;src pid=&quot;0&quot; handle=&quot;0&quot; hwnd=&quot;0&quot; GapiType=&quot;&quot; width=&quot;0&quot; height=&quot;0&quot; flags=&quot;0&quot; wndname=&quot;&quot; lastframets=&quot;0&quot; fpsRender=&quot;0.000000&quot; fpsCapture=&quot;0.000000&quot; imagename=&quot;&quot;/&gt; " name="Game: Auto Detect"  type="7" '+(t="0"===e?'pos_left="0" pos_top="0" pos_right="0.5" pos_bottom="0.5"':"1"===e?'pos_left="0.5" pos_top="0" pos_right="1" pos_bottom="0.5"':"2"===e?'pos_left="0" pos_top="0.5" pos_right="0.5" pos_bottom="1"':"3"===e?'pos_left="0.5" pos_top="0.5" pos_right="1" pos_bottom="1"':'pos_left="0.25" pos_top="0.25" pos_right="0.75" pos_bottom="0.75"')+" />";return App.callFunc(r+"additem",n)}).then(function(){t(!0)})}).catch(function(e){n(e)})})}}return e._autoDetect},e}();!function(e){e[e.RENDER=1]="RENDER",e[e.CAPTURE=2]="CAPTURE",e[e.ALL=3]="ALL"}(exports.AudioDeviceDataflow||(exports.AudioDeviceDataflow={})),function(e){e[e.ACTIVE=1]="ACTIVE",e[e.DISABLED=2]="DISABLED",e[e.UNPLUGGED=4]="UNPLUGGED",e[e.NOTPRESENT=8]="NOTPRESENT",e[e.ALL=15]="ALL"}(exports.AudioDeviceState||(exports.AudioDeviceState={}));var System=function(){function e(){}return e.getAudioDevices=function(e,t){return void 0===e&&(e=exports.AudioDeviceDataflow.ALL),void 0===t&&(t=exports.AudioDeviceState.ACTIVE),new Promise(function(n){App.getAsList("wasapienum").then(function(r){var o=[];if(void 0!==r)for(var i=r.length,s=0;s<i;++s){var a=r[s],c=exports.AudioDeviceState[String(a.State).toUpperCase().replace(/\s+/g,"")];if((c&t)===c){var u=exports.AudioDeviceDataflow[String(a.DataFlow).toUpperCase()];(u&e)===u&&(a.name.toLowerCase().indexOf("xsplit")>-1||o.push(AudioDevice.parse(a)))}}n(o)})})},e.getCameraDevices=function(){return new Promise(function(e){App.getAsList("dshowenum:vsrc").then(function(t){var n=[];if(void 0!==t){for(var r=0,o=t;r<o.length;r++){var i=o[r];-1===String(i.disp).toLowerCase().indexOf("xsplit")&&String(i.disp).toLowerCase()!=="@DEVICE:SW:{860BB310-5D01-11D0-BD3B-00A0C911CE86}\\{778abfb2-e87b-48a2-8d33-675150fcf8a2}".toLowerCase()&&-1===String(i.name).toLowerCase().indexOf("Intel(R) RealSense(TM) 3D Camera Virtual Driver".toLowerCase())&&-1===String(i.name).toLowerCase().indexOf("Intel(R) RealSense(TM) Camera SR300 Virtual Driver".toLowerCase())&&-1===String(i.disp).toLowerCase().indexOf("@DEVICE:PNP:\\\\?\\USB#VID_8086&PID_0AA5&MI_02#".toLowerCase())&&-1===String(i.disp).toLowerCase().indexOf("@DEVICE:PNP:\\\\?\\USB#VID_8086&PID_0A66&MI_02#".toLowerCase())&&n.push(CameraDevice.parse(i))}e(n)}})})},e.getGames=function(){return new Promise(function(e){App.getAsList("gsenum").then(function(t){var n=[];if(void 0!==t)for(var r=t.length,o=0;o<r;++o)n.push(Game.parse(t[o]));e(n)})})},e.getMicrophones=function(){return new Promise(function(e){App.getAsList("dshowenum:asrc").then(function(t){var n=[];if(void 0!==t)for(var r=t.length,o=0;o<r;++o)void 0!==t[o].WaveInId&&n.push(MicrophoneDevice.parse(t[o]));e(n)})})},e.getFonts=function(){return new Promise(function(e,t){Environment.isSourcePlugin()?t(Error("function is not available for source")):App.get("html:fontlist").then(function(n){if("string"==typeof n&&""!==n){var r=n.split(",");e(r)}else t(Error("cannot fetch list of available system fonts"))})})},e.getCursorPosition=function(){return new Promise(function(e,t){if(Environment.isSourcePlugin())t(Error("function is not available for source"));else{var n;exec("GetCursorPos").then(function(r){if("string"==typeof(n=r)){var o=n.split(","),i={};i.x=Number(o[0]),i.y=Number(o[1]),e(i)}else t(Error("cannot fetch current cursor position"))})}})},e.setCursorPosition=function(e){return new Promise(function(t,n){Environment.isSourcePlugin()?n(Error("function is not available for source")):"number"!=typeof e.x||"number"!=typeof e.y?n(Error("invalid parameters")):(exec("SetCursorPos",String(e.x),String(e.y)),t(!0))})},e}(),SourceCamera=function(){function e(){this._delayExclusionObject={roxio:"vid_1b80&pid_e0(01|11|12)",hauppauge1:"vid_2040&pid_49(0[0-3]|8[0-3])",hauppauge2:"vid_2040&pid_e50[012a4]"}}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.getDeviceId=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getDeviceId",!0),Item.get("prop:item",e._id).then(function(e){t(e)})):Item.wrapGet("prop:item",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t(e)})})},e.prototype.getAudioOffset=function(){var e=this;return new Promise(function(t){var n,r;e._isItemCall?(Logger.warn("sourceWarning","getAudioOffset",!0),Item.get("prop:StreamDelay",e._id).then(function(t){return n=Number(t),Item.get("prop:AudioDelay",e._id)}).then(function(e){r=Number(e),t((r-n)/1e4)})):Item.wrapGet("prop:StreamDelay",e._srcId,e._id,e._updateId.bind(e)).then(function(t){return n=Number(t),Item.get("prop:AudioDelay",e._id)}).then(function(e){r=Number(e),t((r-n)/1e4)})})},e.prototype.setAudioOffset=function(e){var t=this;return new Promise(function(n,r){var o,i;t._isItemCall?(Logger.warn("sourceWarning","setAudioOffset",!0),t._checkPromise=Item.get("prop:itemaudio",t._id)):t._checkPromise=Item.wrapGet("prop:itemaudio",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(e){return o=e,t.isAudioAvailable()}).then(function(e){if(!1!==e||""!==o)return t.getDelay();r(new Error("Device has no audio"))}).then(function(n){return i=n,e>=0?Item.set("prop:StreamDelay",String(1e4*i),t._id):Item.set("prop:StreamDelay",String(1e4*(i+-1*e)),t._id)}).then(function(n){return e>=0?Item.set("prop:AudioDelay",String(1e4*(i+e)),t._id):Item.set("prop:AudioDelay",String(1e4*i),t._id)}).then(function(e){n(t)})})},e.prototype.getAudioInput=function(){var e=this;return new Promise(function(t,n){var r;e._isItemCall?(Logger.warn("sourceWarning","getAudioInput",!0),e._checkPromise=Item.get("prop:itemaudio",e._id)):e._checkPromise=Item.wrapGet("prop:itemaudio",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){if(""!==e)return r=e,System.getMicrophones();n(new Error("No tied audio input"))}).then(function(e){var o;if(void 0!==e)for(var i=0;i<e.length;++i)if(e[i].getDisplayId()===r){o=e[i];break}void 0!==o?t(o):n(new Error("Tied audio input not present"))})})},e.prototype.setAudioInput=function(e){var t=this;return new Promise(function(n,r){t._isItemCall?(Logger.warn("sourceWarning","setAudioInput",!0),Item.set("prop:itemaudio",e.getDisplayId(),t._id).then(function(e){n(t)})):Item.wrapSet("prop:itemaudio",e.getDisplayId(),t._srcId,t._id,t._updateId.bind(t)).then(function(e){n(t)})})},e.prototype.isStreamPaused=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isStreamPaused",!0),Item.get("prop:StreamPause",e._id).then(function(e){t("1"===e)})):Item.wrapGet("prop:StreamPause",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t("1"===e)})})},e.prototype.setStreamPaused=function(e){var t=this;return new Promise(function(n,r){t._isItemCall?(Logger.warn("sourceWarning","setStreamPaused",!0),t._checkPromise=Item.set("prop:StreamPause",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:StreamPause",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){return Item.get("prop:StreamPause",t._id)}).then(function(o){e===("1"===o)?n(t):r(new Error("Camera feed cannot be paused/resumed or is not present"))})})},e.prototype.isHardwareEncoder=function(){var e=this;return new Promise(function(t,n){e._isItemCall?(Logger.warn("sourceWarning","isHardwareEncoder",!0),e._checkPromise=Item.get("prop:hwencoder",e._id)):e._checkPromise=Item.wrapGet("prop:hwencoder",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(r){"1"===r?t(!0):e.isActive().then(function(e){e?t(!1):n(new Error("Cannot check hardware encoding. Device not present"))})})})},e.prototype.isActive=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isActive",!0),Item.get("prop:activestate",e._id).then(function(e){t("active"===e)})):Item.wrapGet("prop:activestate",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t("active"===e)})})},e.prototype.getDelay=function(){var e=this;return new Promise(function(t){var n,r;e._isItemCall?(Logger.warn("sourceWarning","getDelay",!0),e._checkPromise=Item.get("prop:StreamDelay",e._id)):e._checkPromise=Item.wrapGet("prop:StreamDelay",e._srcId,e._id,e._updateId.bind(e)).then(function(t){return n=Number(t),Item.get("prop:AudioDelay",e._id)}),e._checkPromise.then(function(t){return n=Number(t),Item.get("prop:AudioDelay",e._id)}).then(function(e){r=Number(e),t(n<r?n/1e4:r/1e4)})})},e.prototype.setDelay=function(e){var t=this;return this._isItemCall&&Logger.warn("sourceWarning","setDelay",!0),new Promise(function(n,r){var o,i;t.isHardwareEncoder().then(function(e){if(!0!==e)return t.getValue();r(new Error("Cannot set delay to hardware encoder devices"))}).then(function(e){for(var n in t._delayExclusionObject){var o=new RegExp(t._delayExclusionObject[n].toLowerCase(),"g");if("string"==typeof e&&null!=e.toLowerCase().match(o)){r(new Error("Cannot set delay to specific device"));break}}return t.getAudioOffset()}).then(function(n){return(i=n)>=0?(o=!0,t._isItemCall?Item.set("prop:StreamDelay",String(1e4*e),t._id):Item.wrapSet("prop:StreamDelay",String(1e4*e),t._srcId,t._id,t._updateId.bind(t))):(o=!1,Item.set("prop:StreamDelay",String(1e4*(e+-1*i)),t._id))}).then(function(n){return o?Item.set("prop:AudioDelay",String(1e4*(e+i)),t._id):Item.set("prop:AudioDelay",String(1e4*e),t._id)}).then(function(e){n(t)})})},e.prototype.isForceDeinterlace=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isForceDeinterlace",!0),Item.get("prop:fdeinterlace",e._id).then(function(e){t("3"===e)})):Item.wrapGet("prop:fdeinterlace",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t("3"===e)})})},e.prototype.setForceDeinterlace=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setForceDeinterlace",!0),Item.set("prop:fdeinterlace",e?"3":"0",t._id).then(function(){n(t)})):Item.wrapSet("prop:fdeinterlace",e?"3":"0",t._srcId,t._id,t._updateId.bind(t)).then(function(){n(t)})})},e}(),CameraSource=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Source);applyMixins(CameraSource,[Audio,SourceCamera]);var SourceAudio=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.isSilenceDetectionEnabled=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isSilenceDetectionEnabled",!0),Item.get("prop:AudioGainEnable",e._id).then(function(e){t("1"===e)})):Item.wrapGet("prop:AudioGainEnable",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t("1"===e)})})},e.prototype.setSilenceDetectionEnabled=function(e){var t=this;return new Promise(function(n,r){t._isItemCall?(Logger.warn("sourceWarning","setSilenceDetectionEnabled",!0),Item.set("prop:AudioGainEnable",e?"1":"0",t._id).then(function(e){n(t)})):Item.wrapSet("prop:AudioGainEnable",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)).then(function(e){n(t)})})},e.prototype.getSilenceThreshold=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getSilenceThreshold",!0),Item.get("prop:AudioGain",e._id).then(function(e){t(Number(e))})):Item.wrapGet("prop:AudioGain",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t(Number(e))})})},e.prototype.setSilenceThreshold=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(Error("Only numbers are acceptable values for threshold")):e%1!=0||e<0||e>128?r(Error("Only integers in the range 0-128 are acceptable for threshold")):t._isItemCall?(Logger.warn("sourceWarning","setSilenceThreshold",!0),Item.set("prop:AudioGain",String(e),t._id).then(function(e){n(t)})):Item.wrapSet("prop:AudioGain",String(e),t._srcId,t._id,t._updateId.bind(t)).then(function(e){n(t)})})},e.prototype.getSilencePeriod=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getSilencePeriod",!0),Item.get("prop:AudioGainLatency",e._id).then(function(e){t(Number(e))})):Item.wrapGet("prop:AudioGainLatency",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t(Number(e))})})},e.prototype.setSilencePeriod=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(Error("Only numbers are acceptable values for period")):e%1!=0||e<0||e>1e4?r(Error("Only integers in the range 0-10000 are acceptable for period")):t._isItemCall?(Logger.warn("sourceWarning","setSilencePeriod",!0),Item.set("prop:AudioGainLatency",String(e),t._id).then(function(e){n(t)})):Item.wrapSet("prop:AudioGainLatency",String(e),t._srcId,t._id,t._updateId.bind(t)).then(function(e){n(t)})})},e.prototype.getAudioOffset=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getAudioOffset",!0),Item.get("prop:AudioDelay",e._id).then(function(e){t(Number(e))})):Item.wrapGet("prop:AudioDelay",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t(Number(e))})})},e.prototype.setAudioOffset=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(Error("Only numbers are acceptable values for period")):e<0?r(Error("Audio offset cannot be negative")):t._isItemCall?(Logger.warn("sourceWarning","setAudioOffset",!0),Item.set("prop:AudioDelay",String(e),t._id).then(function(e){n(t)})):Item.wrapSet("prop:AudioDelay",String(e),t._srcId,t._id,t._updateId.bind(t)).then(function(e){n(t)})})},e}(),AudioSource=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Source);applyMixins(AudioSource,[SourceAudio,Audio]);var SourceConfigurable=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.loadConfig=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","loadConfig",!0),e._checkPromise=Item.get("prop:BrowserConfiguration",e._id)):e._checkPromise=Item.wrapGet("prop:BrowserConfiguration",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){var n="null"===e?{}:JSON.parse(e),r=Global.getPersistentConfig();for(var o in r)delete n[o];t(n)})})},e.prototype.saveConfig=function(e){var t=this;return this._isItemCall&&Logger.warn("sourceWarning","saveConfig",!0),new Promise(function(n,r){if(Environment.isSourcePlugin){var o,i=!1;Item.attach(t._id).then(function(e){return o=e,Item.get("prop:srcid")}).then(function(s){if(i="string"!=typeof s||""===s?0===o:s===t._srcId)if("[object Object]"==={}.toString.call(e)){var a=Global.getPersistentConfig();for(var c in a)e[c]=a[c];exec("SetBrowserProperty","Configuration",JSON.stringify(e)),n(t)}else r(Error("Configuration object should be in JSON format."));else r(Error("Sources may only request other Sources to save a configuration. Consider calling requestSaveConfig() on this Source instance instead."))})}else r(Error("Extensions and source properties windows are not allowed to directly save configuration objects. Call requestSaveConfig() instead."))})},e.prototype.requestSaveConfig=function(e){var t=this;return this._isItemCall&&Logger.warn("sourceWarning","requestSaveConfig",!0),new Promise(function(n){var r;Item.attach(t._id).then(function(o){exec("CallInner"+(0===(r=o)?"":r+1),"MessageSource",JSON.stringify({request:"saveConfig",data:e})),n(t)})})},e.prototype.applyConfig=function(e){var t=this;return this._isItemCall&&Logger.warn("sourceWarning","applyConfig",!0),new Promise(function(n){var r;Item.attach(t._id).then(function(o){exec("CallInner"+(0===(r=o)?"":r+1),"MessageSource",JSON.stringify({request:"applyConfig",data:e})),n(t)})})},e}(),SourceVideoPlaylist=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.getVideoNowPlaying=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getVideoNowPlaying",!0),e._checkPromise=Item.get("prop:srcitem",e._id)):e._checkPromise=Item.wrapGet("prop:srcitem",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){var n=String(e).slice(0,e.indexOf("*"));t(n)})})},e.prototype.setVideoNowPlaying=function(e){var t,n,r=this;return new Promise(function(o,i){r._isItemCall?(Logger.warn("sourceWarning","setVideoNowPlaying",!0),r._checkPromise=Item.get("prop:FilePlaylist",r._id)):r._checkPromise=Item.wrapGet("prop:FilePlaylist",r._srcId,r._id,r._updateId.bind(r)),r._checkPromise.then(function(e){n=String(e).split("|");for(var t=0;t<n.length;t++)n[t]=n[t].slice(0,n[t].indexOf("*"));return n}).then(function(s){if("string"==typeof e)if(-1===n.indexOf(e))i(Error("File not found on Playlist."));else{var a=n.indexOf(e);t=n[a]+"*"+a,Item.set("prop:srcitem",t,r._id).then(function(e){o(r)})}else"number"==typeof e&&e<=n.length?(t=n[e]+"*"+e,Item.set("prop:srcitem",t,r._id).then(function(e){o(this)})):i(Error("Invalid value."))})})},e.prototype.getVideoPlaylistSources=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getVideoPlaylistSources",!0),e._checkPromise=Item.get("prop:FilePlaylist",e._id)):e._checkPromise=Item.wrapGet("prop:FilePlaylist",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){for(var n=String(e).split("|"),r=0;r<n.length;r++)n[r]=n[r].slice(0,n[r].indexOf("*"));t(n)})})},e.prototype.setVideoPlaylistSources=function(e){var t=this;this._isItemCall&&Logger.warn("sourceWarning","setVideoPlaylistSources",!0);var n,r=e.map(function(e){return IO.getVideoDuration(e)});return new Promise(function(o,i){Promise.all(r).then(function(r){for(var o=0;o<e.length;o++)void 0===n?n=e[o]+"*"+o+"*1*"+r[o]+"*100*0*0*0*0*0|":(n+=e[o]+"*"+o+"*1*"+r[o]+"*100*0*0*0*0*0",o+1<e.length&&(n+="|"));return t._isItemCall?Item.set("prop:srcitem",e[0]+"*0",t._id):Item.wrapSet("prop:srcitem",e[0]+"*0",t._srcId,t._id,t._updateId.bind(t)),n}).then(function(e){Item.set("prop:FilePlaylist",e,t._id).then(function(e){o(t)})})})},e}(),CuePoint=function(){function e(e,t){this._time=e,this._action=t}return e.prototype.toString=function(){return String(1e7*this._time)+this._action},e.prototype.setTime=function(e){this._time=e},e.prototype.setAction=function(t){if(t!==e.PAUSE&&t!==e.RESUME&&t!==e.CUT)throw new Error("Trying to set to an invalid Cue Point action.");this._action=t},e.prototype.getTime=function(){return this._time/1e7},e.prototype.getAction=function(){return this._action},e._fromString=function(t){var n=[t.substring(0,t.length-1),t.charAt(t.length-1)],r=n[0],o=n[1];return new e(Number(r),o)},e.PAUSE="p",e.RESUME="r",e.CUT="s",e}();!function(e){e[e.NONE=0]="NONE",e[e.REWIND=1]="REWIND",e[e.LOOP=2]="LOOP",e[e.TRANSPARENT=3]="TRANSPARENT",e[e.HIDE=4]="HIDE"}(exports.ActionAfterPlayback||(exports.ActionAfterPlayback={}));var AUDIO_REGEX=/\.(mp3|aac|cda|ogg|m4a|flac|wma|aiff|aif|wav|mid|midi|rma)$/,VIDEO_REGEX=/\.(avi|flv|mkv|mp4|mpg|wmv|3gp|3g2|asf|f4v|mov|mpeg|vob|webm)$/,SourcePlayback=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.isSeekable=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isSeekable",!0),e._checkPromise=Item.get("sync:syncable",e._id)):e._checkPromise=Item.wrapGet("sync:syncable",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.getPlaybackPosition=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getPlaybackPosition",!0),e._checkPromise=Item.get("sync:position",e._id)):e._checkPromise=Item.wrapGet("sync:position",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t(Number(e)/1e7)})})},e.prototype.setPlaybackPosition=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setPlaybackPosition",!0),t._checkPromise=Item.set("sync:position",String(1e7*e),t._id)):t._checkPromise=Item.wrapSet("sync:position",String(1e7*e),t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.getPlaybackDuration=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getPlaybackDuration",!0),e._checkPromise=Item.get("sync:duration",e._id)):e._checkPromise=Item.wrapGet("sync:duration",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t(Number(e)/1e7)})})},e.prototype.isPlaying=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isPlaying",!0),e._checkPromise=Item.get("sync:state",e._id)):e._checkPromise=Item.wrapGet("sync:state",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("running"===e)})})},e.prototype.setPlaying=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setPlaying",!0),t._checkPromise=Item.set("sync:state",e?"running":"stopped",t._id)):t._checkPromise=Item.wrapSet("sync:state",e?"running":"stopped",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.getPlaybackStartPosition=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getPlaybackStartPosition",!0),e._checkPromise=Item.get("prop:InPoint",e._id)):e._checkPromise=Item.wrapGet("prop:InPoint",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t(Number(e)/1e7)})})},e.prototype.setPlaybackStartPosition=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setPlaybackStartPosition",!0),t._checkPromise=Item.set("prop:InPoint",String(1e7*e),t._id)):t._checkPromise=Item.wrapSet("prop:InPoint",String(1e7*e),t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.getPlaybackEndPosition=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getPlaybackEndPosition",!0),e._checkPromise=Item.get("prop:OutPoint",e._id)):e._checkPromise=Item.wrapGet("prop:OutPoint",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t(Number(e)/1e7)})})},e.prototype.setPlaybackEndPosition=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setPlaybackEndPosition",!0),t._checkPromise=Item.set("prop:OutPoint",String(1e7*e),t._id)):t._checkPromise=Item.wrapSet("prop:OutPoint",String(1e7*e),t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.getActionAfterPlayback=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getActionAfterPlayback",!0),e._checkPromise=Item.get("prop:OpWhenFinished",e._id)):e._checkPromise=Item.wrapGet("prop:OpWhenFinished",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t(Number(e))})})},e.prototype.setActionAfterPlayback=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setActionAfterPlayback",!0),t._checkPromise=Item.set("prop:OpWhenFinished",String(e),t._id)):t._checkPromise=Item.wrapSet("prop:OpWhenFinished",String(e),t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.isAutostartOnSceneLoad=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isAutostartOnSceneLoad",!0),e._checkPromise=Item.get("prop:StartOnLoad",e._id)):e._checkPromise=Item.wrapGet("prop:StartOnLoad",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.setAutostartOnSceneLoad=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setAutostartOnSceneLoad",!0),t._checkPromise=Item.set("prop:StartOnLoad",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:StartOnLoad",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.isForceDeinterlace=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isForceDeinterlace",!0),e._checkPromise=Item.get("prop:fdeinterlace",e._id)):e._checkPromise=Item.wrapGet("prop:fdeinterlace",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("3"===e)})})},e.prototype.setForceDeinterlace=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setForceDeinterlace",!0),t._checkPromise=Item.set("prop:fdeinterlace",e?"3":"0",t._id)):t._checkPromise=Item.wrapSet("prop:fdeinterlace",e?"3":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.isRememberingPlaybackPosition=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isRememberingPlaybackPosition",!0),e._checkPromise=Item.get("prop:RememberPosition",e._id)):e._checkPromise=Item.wrapGet("prop:RememberPosition",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.setRememberingPlaybackPosition=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setRememberingPlaybackPosition",!0),t._checkPromise=Item.set("prop:RememberPosition",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:RememberPosition",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.isShowingPlaybackPosition=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isShowingPlaybackPosition",!0),e._checkPromise=Item.get("prop:ShowPosition",e._id)):e._checkPromise=Item.wrapGet("prop:ShowPosition",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.setShowingPlaybackPosition=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setShowingPlaybackPosition",!0),t._checkPromise=Item.set("prop:ShowPositio",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:ShowPositio",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.getCuePoints=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getCuePoints",!0),e._checkPromise=Item.get("prop:CuePoints",e._id)):e._checkPromise=Item.wrapGet("prop:CuePoints",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){if(""===e)t([]);else{var n=e.split(",").map(function(e){return CuePoint._fromString(e)});t(n)}})})},e.prototype.setCuePoints=function(e){var t=this,n=e.map(function(e){return e.toString()}).join(",");return new Promise(function(e){t._isItemCall?(Logger.warn("sourceWarning","setCuePoints",!0),t._checkPromise=Item.set("prop:CuePoints",n,t._id)):t._checkPromise=Item.wrapSet("prop:CuePoints",n,t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){e(t)})})},e.prototype.isAudio=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isAudio",!0),e._checkPromise=Item.get("prop:srcitem",e._id)):e._checkPromise=Item.wrapGet("prop:srcitem",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t(AUDIO_REGEX.test(e))})})},e.prototype.isVideo=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isVideo",!0),e._checkPromise=Item.get("prop:srcitem",e._id)):e._checkPromise=Item.wrapGet("prop:srcitem",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t(VIDEO_REGEX.test(e))})})},e.prototype.getValue=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getValue",!0),e._checkPromise=Item.get("prop:srcitem",e._id)):e._checkPromise=Item.wrapGet("prop:srcitem",e._srcId,e._id,e._updateId.bind(e).bind(e)),e._checkPromise.then(function(e){t(e)})})},e.prototype.setValue=function(e){var t=this;return new Promise(function(n,r){VIDEO_REGEX.test(e)||AUDIO_REGEX.test(e)?(t._isItemCall?(Logger.warn("sourceWarning","setValue",!0),t._checkPromise=Item.set("prop:srcitem",e,t._id)):t._checkPromise=Item.wrapSet("prop:srcitem",e,t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){return Item.set("prop:name",e,t._id)}).then(function(){return Item.set("prop:CuePoints","",t._id)}).then(function(){n(t)})):r(new Error("You can only set the value to a valid media type"))})},e}(),VideoPlaylistSource=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Source);applyMixins(VideoPlaylistSource,[SourceConfigurable,SourceVideoPlaylist,SourcePlayback,Audio]);var iSourceHtml=function(){function iSourceHtml(){}return iSourceHtml.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},iSourceHtml.prototype.call=function(e,t){var n=this;return new Promise(function(r){var o;n._isItemCall?(Logger.warn("sourceWarning","call",!0),n._checkPromise=Item.attach(n._id)):n._checkPromise=Item.attach(n._id),n._checkPromise.then(function(i){o=i,exec("CallInner"+("0"===String(o)?"":o+1),e,t),r(n)})})},iSourceHtml.prototype.getURL=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getURL",!0),e._checkPromise=Item.get("prop:srcitem",e._id)):e._checkPromise=Item.wrapGet("prop:srcitem",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){e=String(e).split("*")[0],t(e)})})},iSourceHtml.prototype.setURL=function(e){var t=this;return new Promise(function(n,r){t._isItemCall?(Logger.warn("sourceWarning","setURL",!0),t._checkPromise=Item.get("prop:srcitem",t._id)):t._checkPromise=Item.wrapGet("prop:srcitem",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(n){var r=String(n).split("*");return r[0]=e,Item.set("prop:srcitem",r.join("*"),t._id)}).then(function(e){e?n(t):r("Invalid value")})})},iSourceHtml.prototype.isBrowserTransparent=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isBrowserTransparent",!0),e._checkPromise=Item.get("prop:BrowserTransparent",e._id)):e._checkPromise=Item.wrapGet("prop:BrowserTransparent",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},iSourceHtml.prototype.enableBrowserTransparency=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","enableBrowserTransparency",!0),t._checkPromise=Item.set("prop:BrowserTransparent",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:BrowserTransparent",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},iSourceHtml.prototype.isBrowser60FPS=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isBrowser60FPS",!0),e._checkPromise=Item.get("prop:Browser60fps",e._id)):e._checkPromise=Item.wrapGet("prop:Browser60fps",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},iSourceHtml.prototype.enableBrowser60FPS=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","isBrowser60FPS",!0),t._checkPromise=Item.get("prop:Browser60fps",t._id)):t._checkPromise=Item.wrapGet("prop:Browser60fps",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(r){"1"===r!==e&&Item.set("prop:Browser60fps",e?"1":"0",t._id),n(t)})})},iSourceHtml.prototype.getBrowserCustomSize=function(){var e=this;return new Promise(function(t){var n;e._isItemCall?(Logger.warn("sourceWarning","getBrowserCustomSize",!0),e._checkPromise=Item.get("prop:BrowserSize",e._id)):e._checkPromise=Item.wrapGet("prop:BrowserSize",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){if(""!==e){var r=decodeURIComponent(e).split(","),o=r[0],i=r[1];n=Rectangle.fromDimensions(Number(o)/window.devicePixelRatio,Number(i)/window.devicePixelRatio)}else n=Rectangle.fromDimensions(0,0);t(n)})})},iSourceHtml.prototype.setBrowserCustomSize=function(e){var t=this;return new Promise(function(n){e.setWidth(e.getWidth()*window.devicePixelRatio),e.setHeight(e.getHeight()*window.devicePixelRatio),t._isItemCall?(Logger.warn("sourceWarning","setBrowserCustomSize",!0),t._checkPromise=Item.set("prop:BrowserSize",e.toDimensionString(),t._id)):t._checkPromise=Item.wrapSet("prop:BrowserSize",e.toDimensionString(),t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},iSourceHtml.prototype.getAllowRightClick=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getAllowRightClick",!0),e._checkPromise=Item.get("prop:BrowserRightClick",e._id)):e._checkPromise=Item.wrapGet("prop:BrowserRightClick",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},iSourceHtml.prototype.setAllowRightClick=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setAllowRightClick",!0),t._checkPromise=Item.set("prop:BrowserRightClick",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:BrowserRightClick",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},iSourceHtml.prototype.getBrowserJS=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getBrowserJS",!0),e._checkPromise=Item.get("prop:custom",e._id)):e._checkPromise=Item.wrapGet("prop:custom",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){var n="";try{var r=JSON.parse(e);r.hasOwnProperty("customJS")&&(n=r.customJS)}catch(e){}t(n)})})},iSourceHtml.prototype.setBrowserJS=function(e,t){var n=this;return void 0===t&&(t=!1),new Promise(function(r,o){var i={};n._isItemCall?(Logger.warn("sourceWarning","setBrowserJS",!0),n._checkPromise=Item.get("prop:custom",n._id)):n._checkPromise=Item.wrapGet("prop:custom",n._srcId,n._id,n._updateId.bind(n)),n._checkPromise.then(function(t){var r="",o=" ",s=!0,a=!0;try{(i=JSON.parse(t)).hasOwnProperty("cssEnabled")&&(a="true"==i.cssEnabled),i.hasOwnProperty("scriptEnabled")&&(s="true"==i.scriptEnabled),i.hasOwnProperty("customCSS")&&(r=i.customCSS)}catch(e){}return i.cssEnabled=a.toString(),i.scriptEnabled=s.toString(),i.customCSS=r,i.customJS=e,!0===a&&(o+="var xjsCSSOverwrite = document.createElement('style');xjsCSSOverwrite.id = 'splitmedialabsCSSOverwrite';xjsCSSOverwrite.type = 'text/css';var h = document.querySelector('head');var existing = document.querySelector('head #splitmedialabsCSSOverwrite');if (existing != null)h.removeChild(existing);xjsCSSOverwrite.innerHTML = '"+r.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/g," ").replace(/(\[br\])/gm,"")+"';h.appendChild(xjsCSSOverwrite);"),""!==e&&!0===s&&(o+=e),Item.set("prop:BrowserJs",o,n._id)}).then(function(){return Item.set("prop:custom",JSON.stringify(i),n._id)}).then(function(){t?Item.set("refresh","",n._id).then(function(){r(n)}):r(n)})})},iSourceHtml.prototype.isBrowserJSEnabled=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isBrowserJSEnabled",!0),e._checkPromise=Item.get("prop:custom",e._id)):e._checkPromise=Item.wrapGet("prop:custom",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){var n=!0;try{var r=JSON.parse(e);r.hasOwnProperty("scriptEnabled")&&(n="true"==r.scriptEnabled)}catch(e){}t(n)})})},iSourceHtml.prototype.enableBrowserJS=function(e){var t=this;return new Promise(function(n,r){var o={};t._isItemCall?(Logger.warn("sourceWarning","enableBrowserJS",!0),t._checkPromise=Item.get("prop:custom",t._id)):t._checkPromise=Item.wrapGet("prop:custom",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(n){var r="",i="",s=" ",a=!0;try{(o=JSON.parse(n)).hasOwnProperty("cssEnabled")&&(a="true"==o.cssEnabled),o.hasOwnProperty("customJS")&&(r=o.customJS),o.hasOwnProperty("customCSS")&&(i=o.customCSS)}catch(e){}return o.cssEnabled=a.toString(),o.scriptEnabled=e.toString(),o.customJS=r,o.customCSS=i,!0===a&&(s+='var xjsCSSOverwrite = document.createElement("style");xjsCSSOverwrite.id = "splitmedialabsCSSOverwrite";xjsCSSOverwrite.type = "text/css";var h = document.querySelector("head");var existing = document.querySelector("head #splitmedialabsCSSOverwrite");if (existing != null)h.removeChild(existing);xjsCSSOverwrite.innerHTML = "'+i.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/g," ").replace(/(\[br\])/gm,"")+'";"h.appendChild(xjsCSSOverwrite);'),""!==r&&!0===e&&(s+=r),Item.set("prop:BrowserJs",s,t._id)}).then(function(){return Item.set("prop:custom",JSON.stringify(o),t._id)}).then(function(){e?n(t):Item.set("refresh","",t._id).then(function(){n(t)})})})},iSourceHtml.prototype.getCustomCSS=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getCustomCSS",!0),e._checkPromise=Item.get("prop:custom",e._id)):e._checkPromise=Item.wrapGet("prop:custom",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){var n="";try{var r=JSON.parse(e);r.hasOwnProperty("customCSS")&&(n=r.customCSS)}catch(e){}t(n)})})},iSourceHtml.prototype.setCustomCSS=function(e){var t=this;return new Promise(function(n,r){var o={};t._isItemCall?(Logger.warn("sourceWarning","setCustomCSS",!0),t._checkPromise=Item.get("prop:custom",t._id)):t._checkPromise=Item.wrapGet("prop:custom",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(n){var r="",i=" ",s=!0,a=!0;try{(o=JSON.parse(n)).hasOwnProperty("cssEnabled")&&(a="true"==o.cssEnabled),o.hasOwnProperty("scriptEnabled")&&(s="true"==o.scriptEnabled),o.hasOwnProperty("customJS")&&(r=o.customJS)}catch(e){}return o.cssEnabled=a.toString(),o.scriptEnabled=s.toString(),o.customJS=r,o.customCSS=e,!0===a&&(i+='var xjsCSSOverwrite = document.createElement("style");xjsCSSOverwrite.id = "splitmedialabsCSSOverwrite";xjsCSSOverwrite.type = "text/css";var h = document.querySelector("head");var existing = document.querySelector("head #splitmedialabsCSSOverwrite");if (existing != null)h.removeChild(existing);xjsCSSOverwrite.innerHTML = "'+e.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/g," ").replace(/(\[br\])/gm,"")+'";h.appendChild(xjsCSSOverwrite);'),""!==r&&!0===s&&(i+=r),Item.set("prop:BrowserJs",i,t._id)}).then(function(){return Item.set("prop:custom",JSON.stringify(o),t._id)}).then(function(){n(t)})})},iSourceHtml.prototype.isCustomCSSEnabled=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isCustomCSSEnabled",!0),e._checkPromise=Item.get("prop:custom",e._id)):e._checkPromise=Item.wrapGet("prop:custom",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){var n=!0;try{var r=JSON.parse(e);r.hasOwnProperty("cssEnabled")&&(n="true"==r.cssEnabled)}catch(e){}t(n)})})},iSourceHtml.prototype.enableCustomCSS=function(value){var _this=this;return new Promise(function(resolve,reject){var customObject={};_this._isItemCall?(Logger.warn("sourceWarning","enableCustomCSS",!0),_this._checkPromise=Item.get("prop:custom",_this._id)):_this._checkPromise=Item.wrapGet("prop:custom",_this._srcId,_this._id,_this._updateId.bind(_this)),_this._checkPromise.then(function(e){var t="",n="",r=" ",o=!0;try{(customObject=JSON.parse(e)).hasOwnProperty("scriptEnabled")&&(o="true"==customObject.scriptEnabled),customObject.hasOwnProperty("customJS")&&(t=customObject.customJS),customObject.hasOwnProperty("customCSS")&&(n=customObject.customCSS)}catch(e){}return customObject.scriptEnabled=o.toString(),customObject.cssEnabled=value.toString(),customObject.customJS=t,customObject.customCSS=n,!0===value&&(r+='var xjsCSSOverwrite = document.createElement("style");xjsCSSOverwrite.id = "splitmedialabsCSSOverwrite";xjsCSSOverwrite.type = "text/css";var h = document.querySelector("head");var existing = document.querySelector("head #splitmedialabsCSSOverwrite");if (existing != null)h.removeChild(existing);xjsCSSOverwrite.innerHTML = "'+n.replace(/(\r\n|\n|\r)/gm,"").replace(/\s{2,}/g," ").replace(/(\[br\])/gm,"")+'";h.appendChild(xjsCSSOverwrite);'),""!==t&&value===o&&(r+=t),Item.set("prop:BrowserJs",r,_this._id)}).then(function(){return Item.set("prop:custom",JSON.stringify(customObject),_this._id)}).then(function(){if(value)resolve(_this);else{var cssScript="var h = document.querySelector('head');var existing3 = document.querySelector('head #splitmedialabsCSSOverwrite');if (existing3 != null)h.removeChild(existing3);";Environment.isSourcePlugin()?eval(cssScript):exec("CallInner","eval",cssScript),resolve(_this)}})})},iSourceHtml}(),HtmlSource=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Source);applyMixins(HtmlSource,[iSourceHtml,SourceConfigurable,Audio]);var SourceFlash=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.getCustomResolution=function(){var e=this;return new Promise(function(t){var n;e._isItemCall?(Logger.warn("sourceWarning","getCustomResolution",!0),e._checkPromise=Item.get("prop:BrowserSize",e._id)):e._checkPromise=Item.wrapGet("prop:BrowserSize",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){if(""!==e){var r=decodeURIComponent(e).split(","),o=r[0],i=r[1];n=Rectangle.fromDimensions(Number(o),Number(i))}else n=Rectangle.fromDimensions(0,0);t(n)})})},e.prototype.setCustomResolution=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setCustomResolution",!0),Item.set("prop:BrowserSize",e.toDimensionString(),t._id).then(function(){n(t)})):Item.wrapSet("prop:BrowserSize",e.toDimensionString(),t._srcId,t._id,t._updateId.bind(t)).then(function(){n(t)})})},e.prototype.getAllowRightClick=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getAllowRightClick",!0),Item.get("prop:BrowserRightClick",e._id).then(function(e){t("1"===e)})):Item.wrapGet("prop:BrowserRightClick",e._srcId,e._id,e._updateId.bind(e)).then(function(e){t("1"===e)})})},e.prototype.setAllowRightClick=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setAllowRightClick",!0),Item.set("prop:BrowserRightClick",e?"1":"0",t._id).then(function(){n(t)})):Item.wrapSet("prop:BrowserRightClick",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)).then(function(){n(t)})})},e}(),FlashSource=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Source);applyMixins(FlashSource,[Audio,SourceFlash]);var iSourceScreen=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.isStickToTitle=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","isStickToTitle",!0),e._checkPromise=Item.get("prop:ScrCapTrackWindowTitle",e._id)):e._checkPromise=Item.wrapGet("prop:ScrCapTrackWindowTitle",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){t("0"===e)})})},e.prototype.setStickToTitle=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setStickToTitle",!0),t._checkPromise=Item.set("prop:ScrCapTrackWindowTitle",e?"0":"1",t._id)):t._checkPromise=Item.wrapSet("prop:ScrCapTrackWindowTitle",e?"0":"1",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(){n(t)})})},e.prototype.getCaptureLayered=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getCaptureLayered",!0),e._checkPromise=Item.get("prop:ScrCapLayered",e._id)):e._checkPromise=Item.wrapGet("prop:ScrCapLayered",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.setCaptureLayered=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setCaptureLayered",!0),t._checkPromise=Item.set("prop:ScrCapLayered",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:ScrCapLayered",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(e){n(t)})})},e.prototype.getOptimizedCapture=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getOptimizedCapture",!0),e._checkPromise=Item.get("prop:ScrCapOptCapture1",e._id)):e._checkPromise=Item.wrapGet("prop:ScrCapOptCapture1",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.setOptimizedCapture=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setOptimizedCapture",!0),t._checkPromise=Item.set("prop:ScrCapOptCapture1",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:ScrCapOptCapture1",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(e){n(t)})})},e.prototype.getShowMouseClicks=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getShowMouseClicks",!0),e._checkPromise=Item.get("prop:ScrCapShowClicks",e._id)):e._checkPromise=Item.wrapGet("prop:ScrCapShowClicks",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.setShowMouseClicks=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setShowMouseClicks",!0),t._checkPromise=Item.set("prop:ScrCapShowClicks",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:ScrCapShowClicks",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(e){n(t)})})},e.prototype.getShowMouse=function(){var e=this;return new Promise(function(t){e._isItemCall?(Logger.warn("sourceWarning","getShowMouse",!0),e._checkPromise=Item.get("prop:ScrCapShowMouse",e._id)):e._checkPromise=Item.wrapGet("prop:ScrCapShowMouse",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){t("1"===e)})})},e.prototype.setShowMouse=function(e){var t=this;return new Promise(function(n){t._isItemCall?(Logger.warn("sourceWarning","setShowMouse",!0),t._checkPromise=Item.set("prop:ScrCapShowMouse",e?"1":"0",t._id)):t._checkPromise=Item.wrapSet("prop:ScrCapShowMouse",e?"1":"0",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(r){!0===r&&Item.set("prop:ScrCapShowClicks",e?"1":"0",t._id),n(t)})})},e.prototype.getCaptureArea=function(){var e=this;return this._isItemCall&&Logger.warn("sourceWarning","getCaptureArea",!0),new Promise(function(t){e.getValue().then(function(e){if(e instanceof XML){var n=JSON$1.parse(e);t(Rectangle.fromCoordinates(Number(n.left),Number(n.top),Number(n.width)+Number(n.left),Number(n.height)+Number(n.top)))}else t(Rectangle.fromCoordinates(0,0,0,0))})})},e.prototype.setCaptureArea=function(e){var t=this;return this._isItemCall&&Logger.warn("sourceWarning","setCaptureArea",!0),new Promise(function(n){t.getValue().then(function(e){return new Promise(function(n){t._isItemCall?t._checkPromise=Item.get("screenresolution",t._id):t._checkPromise=Item.wrapGet("screenresolution",t._srcId,t._id,t._updateId.bind(t)),t._checkPromise.then(function(t){var r=t.split(",");n({value:e,res:Rectangle.fromCoordinates(Number(r[0]),Number(r[1]),Number(r[2]),Number(r[3]))})})})}).then(function(r){var o=new JSON$1;r.value instanceof XML?o=JSON$1.parse(r.value):(o.tag="screen",o.module="",o.window="",o.hwnd="0",o.wclient="0",o.left="0",o.top="0",o.width="0",o.height="0"),o.left=e.getLeft()>=r.res.getLeft()?e.getLeft():Number(o.left)>=r.res.getLeft()?o.left:r.res.getLeft(),o.top=e.getTop()>=r.res.getTop()?e.getTop():Number(o.top)>=r.res.getTop()?o.top:r.res.getTop(),o.width=e.getWidth()<=r.res.getWidth()?e.getWidth():Number(o.width)<=r.res.getWidth()?o.width:r.res.getWidth(),o.height=e.getHeight()<=r.res.getHeight()?e.getHeight():Number(o.height)<=r.res.getHeight()?o.height:r.res.getHeight(),t.setValue(XML.parseJSON(o)).then(function(){n(t)})})})},e.prototype.isClientArea=function(){var e=this;return this._isItemCall&&Logger.warn("sourceWarning","isClientArea",!0),new Promise(function(t){e.getValue().then(function(e){if(e instanceof XML){var n=JSON$1.parse(e);t("1"===n.wclient)}else t(!1)})})},e.prototype.setClientArea=function(e){var t=this;return this._isItemCall&&Logger.warn("sourceWarning","setClientArea",!0),new Promise(function(n){t.getValue().then(function(r){var o=new JSON$1;r instanceof XML?o=JSON$1.parse(r):(o.tag="screen",o.module="",o.window="",o.hwnd="0",o.wclient="0",o.left="0",o.top="0",o.width="0",o.height="0"),o.wclient=e?"1":"0",t.setValue(XML.parseJSON(o)).then(function(){n(t)})})})},e}(),ScreenSource=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Source);applyMixins(ScreenSource,[iSourceScreen]);var ImageSource=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Source),SourceMedia=function(){function e(){}return e.prototype._updateId=function(e,t){this._id=e,this._sceneId=t},e.prototype.getFileInfo=function(){var e=this;return new Promise(function(t,n){e._isItemCall?(Logger.warn("sourceWarning","getFileInfo",!0),e._checkPromise=Item.get("FileInfo",e._id)):e._checkPromise=Item.wrapGet("FileInfo",e._srcId,e._id,e._updateId.bind(e)),e._checkPromise.then(function(e){try{var r={},o=JSON$1.parse(e);if(void 0!==o.children&&o.children.length>0){for(var i=o.children,s=i.length-1;s>=0;s--){for(var a=i[s],c={},u=Object.keys(a),p=u.length-1;p>=0;p--){var l=u[p];"value"!==l&&"tag"!==l&&(c[l]=a[l])}r[a.tag]=c}t(r)}else t(r)}catch(e){n(Error("Error retrieving file information"))}})})},e}(),MediaSource=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Source);applyMixins(MediaSource,[SourcePlayback,Audio,SourceMedia]);var ItemLayout=function(){function e(){}return e.prototype._getCanvasAndZRotate=function(e){var t={};return e>=-180&&e<=-135?(t.canvasRotate=180,t.zRotate=e+180,t.orientation="landscape"):e>-135&&e<-45?(t.canvasRotate=270,t.zRotate=e+90,t.orientation="portrait"):e>=-45&&e<=45?(t.canvasRotate=0,t.zRotate=e,t.orientation="landscape"):e>45&&e<135?(t.canvasRotate=90,t.zRotate=e-90,t.orientation="portrait"):e>=135&&e<=180&&(t.canvasRotate=180,t.zRotate=e-180,t.orientation="landscape"),t},e.prototype._adjustRotation=function(e){return e>180?e-=360:e<-180&&(e+=360),e},e.prototype.isKeepAspectRatio=function(){var e=this;return new Promise(function(t){Item.get("prop:keep_ar",e._id).then(function(e){t("1"===e)})})},e.prototype.setKeepAspectRatio=function(e){var t=this;return new Promise(function(n){Item.set("prop:keep_ar",e?"1":"0",t._id).then(function(){n(t)})})},e.prototype.isPositionLocked=function(){var e=this;return new Promise(function(t){Item.get("prop:lockmove",e._id).then(function(e){t("1"===e)})})},e.prototype.setPositionLocked=function(e){var t=this;return new Promise(function(n){Item.set("prop:lockmove",e?"1":"0",t._id).then(function(){n(t)})})},e.prototype.isEnhancedResizeEnabled=function(){var e=this;return new Promise(function(t){Item.get("prop:mipmaps",e._id).then(function(e){t("1"===e)})})},e.prototype.setEnhancedResizeEnabled=function(e){var t=this;return new Promise(function(n){Item.set("prop:mipmaps",e?"1":"0",t._id).then(function(){n(t)})})},e.prototype.getPosition=function(){var e=this;return new Promise(function(t){Item.get("prop:pos",e._id).then(function(n){var r=String(n).split(","),o=r[0],i=r[1],s=r[2],a=r[3];e.position=Rectangle.fromCoordinates(Number(o),Number(i),Number(s),Number(a)),t(e.position)})})},e.prototype.setPosition=function(e){var t=this;return new Promise(function(n,r){try{Item.set("prop:pos",e.toCoordinateString(),t._id).then(function(){n(t)})}catch(e){r(e)}})},e.prototype.getRotateY=function(){var e=this;return new Promise(function(t){Item.get("prop:rotate_y",e._id).then(function(e){t(Number(e))})})},e.prototype.setRotateY=function(e){var t=this;return new Promise(function(n,r){e<-360||e>360?r(Error("Invalid value. Min: -360, Max: 360")):Item.set("prop:rotate_y",String(e),t._id).then(function(){n(t)})})},e.prototype.getRotateX=function(){var e=this;return new Promise(function(t){Item.get("prop:rotate_x",e._id).then(function(e){t(Number(e))})})},e.prototype.setRotateX=function(e){var t=this;return new Promise(function(n,r){e<-360||e>360?r(Error("Invalid value. Min: -360, Max: 360")):Item.set("prop:rotate_x",String(e),t._id).then(function(){n(t)})})},e.prototype.getRotateZ=function(){var e=this;return new Promise(function(t){Item.get("prop:rotate_z",e._id).then(function(e){t(Number(e))})})},e.prototype.setRotateZ=function(e){var t=this;return new Promise(function(n,r){e<-360||e>360?r(Error("Invalid value. Min: -360, Max: 360")):Item.set("prop:rotate_z",String(e),t._id).then(function(){n(t)})})},e.prototype.getCropping=function(){var e=this;return new Promise(function(t){var n={};Item.get("prop:crop",e._id).then(function(e){var r=String(e).split(","),o=r[0],i=r[1],s=r[2],a=r[3];n.left=Number(o),n.top=Number(i),n.right=Number(s),n.bottom=Number(a),t(n)})})},e.prototype.setCropping=function(e){var t=this;return new Promise(function(n,r){e.hasOwnProperty("top")&&e.hasOwnProperty("left")&&e.hasOwnProperty("right")&&e.hasOwnProperty("bottom")?Item.set("prop:crop",e.left.toFixed(6)+","+e.top.toFixed(6)+","+e.right.toFixed(6)+","+e.bottom.toFixed(6),t._id).then(function(){n(t)}):r("Error setting cropping, insufficient properties (left, top, right, bottom)")})},e.prototype.getCanvasRotate=function(){var e=this;return new Promise(function(t){Item.get("prop:rotate_canvas",e._id).then(function(e){var n=Number(e);t([0,90,180,270].indexOf(n)<0?0:n)})})},e.prototype.setCanvasRotate=function(e){var t=this;return new Promise(function(n,r){[0,90,180,270].indexOf(e)<0?r(Error("Invalid value. Only possible values are 0, 90, 180 and 270")):Item.set("prop:rotate_canvas",String(e),t._id).then(function(){n(t)})})},e.prototype.getEnhancedRotate=function(){var e=this;return new Promise(function(t){var n,r,o;Item.get("prop:rotate_z",e._id).then(function(t){return n=Number(t),Item.get("prop:rotate_canvas",e._id)}).then(function(i){r=Number(i),o=e._adjustRotation(r+n),t(o)})})},e.prototype.setEnhancedRotate=function(e){var t=this;return new Promise(function(n,r){if(e<-180||e>180)r(Error("Invalid value. Min: -180, Max: 180"));else{var o,i=t._getCanvasAndZRotate(Number(e));t.getEnhancedRotate().then(function(e){return o=t._getCanvasAndZRotate(Number(e)),Item.set("prop:rotate_z",String(i.zRotate),t._id)}).then(function(){return Item.set("prop:rotate_canvas",String(i.canvasRotate),t._id)}).then(function(){if(o.orientation!==i.orientation){var e,n,r;Item.get("mixerresolution",t._id).then(function(o){return e=o.split(","),n=Number(e[0]),r=Number(e[1]),Item.get("prop:pos",t._id)}).then(function(e){var o,i,s,a,c=e.split(","),u=parseFloat(c[0])*n,p=parseFloat(c[1])*r,l=parseFloat(c[2])*n,m=parseFloat(c[3])*r,d=Math.round(l-u),f=Math.round(m-p);if(f>n)o=0,i=n;else{var h=u+(l-u)/2;o=h-f/2,i=h+f/2}if(d>r)s=0,a=r;else{var g=p+(m-p)/2;s=g-d/2,a=g+d/2}var _=o/n,v=s/r,y=i/n,w=a/r;return Item.set("prop:pos",_.toFixed(6)+","+v.toFixed(6)+","+y.toFixed(6)+","+w.toFixed(6),t._id)}).then(function(){return Item.get("prop:posaspect",t._id)}).then(function(e){return Item.set("prop:pos",e,t._id)})}})}})},e.prototype.setCroppingEnhanced=function(e){var t=this;return new Promise(function(n,r){if(e.hasOwnProperty("top")&&e.hasOwnProperty("left")&&e.hasOwnProperty("right")&&e.hasOwnProperty("bottom")){var o,i,s,a,c,u={};Item.get("mixerresolution",t._id).then(function(e){return s=e.split(","),Item.get("prop:pos",t._id)}).then(function(e){return a=e.split(","),Item.get("prop:rotate_canvas",t._id)}).then(function(e){return c=e,Item.get("prop:crop",t._id)}).then(function(r){var p=parseInt(s[0]),l=parseInt(s[1]),m=parseFloat(a[0])*p,d=parseFloat(a[1])*l,f=parseFloat(a[2])*p-m,h=parseFloat(a[3])*l-d,g=r.split(","),_=parseFloat(g[0]),v=parseFloat(g[1]),y=parseFloat(g[2]),w=parseFloat(g[3]),I=Math.round(100*_),S=Math.round(100*v),P=Math.round(100*y),b=Math.round(100*w),E=0==I&&0==S&&0==P&&0==b;if(270==c)if(E)u=a,i=f,o=h;else{var C=parseFloat(a[3]),x=parseFloat(a[0]),k=parseFloat(a[1]),O=parseFloat(a[2]);if(0!=_||0!=y){A=(o=h/(1-y-_))*_/l;u[3]=C+A;L=o*y/l;u[1]=k-L}else o=h;if(0!=v||0!=w){T=(i=f/(1-w-v))*v/p;u[0]=x-T;N=i*w/p;u[2]=O+N}else i=f;0==_&&(u[3]=a[3]),0==v&&(u[0]=a[0]),0==y&&(u[1]=a[1]),0==w&&(u[2]=a[2])}else if(180==c)if(E)u=a,o=f,i=h;else{var C=parseFloat(a[2]),x=parseFloat(a[3]),k=parseFloat(a[0]),O=parseFloat(a[1]);if(0!=_||0!=y){A=(o=f/(1-y-_))*_/p;u[2]=C+A;L=o*y/p;u[0]=k-L}else o=f;if(0!=v||0!=w){T=(i=h/(1-w-v))*v/l;u[3]=x+T;N=i*w/l;u[1]=O-N}else i=h;0==_&&(u[2]=a[2]),0==v&&(u[3]=a[3]),0==y&&(u[0]=a[0]),0==w&&(u[1]=a[1])}else if(90==c)if(E)u=a,i=f,o=h;else{var C=parseFloat(a[1]),x=parseFloat(a[2]),k=parseFloat(a[3]),O=parseFloat(a[0]);if(0!=_||0!=y){A=(o=h/(1-y-_))*_/l;u[1]=C-A;L=o*y/l;u[3]=k+L}else o=h;if(0!=v||0!=w){T=(i=f/(1-w-v))*v/p;u[2]=x+T;N=i*w/p;u[0]=O-N}else i=f;0==_&&(u[1]=a[1]),0==v&&(u[2]=a[2]),0==y&&(u[3]=a[3]),0==w&&(u[0]=a[0])}else if(E)u=a,i=h,o=f;else{var C=parseFloat(a[0]),x=parseFloat(a[1]),k=parseFloat(a[2]),O=parseFloat(a[3]);if(0!=_||0!=y){var A=(o=f/(1-y-_))*_/p;u[0]=C-A;var L=o*y/p;u[2]=k+L}else o=f;if(0!=v||0!=w){var T=(i=h/(1-w-v))*v/l;u[1]=x-T;var N=i*w/l;u[3]=O+N}else i=h;0==_&&(u[0]=a[0]),0==v&&(u[1]=a[1]),0==y&&(u[2]=a[2]),0==w&&(u[3]=a[3])}var R,D,M,F,V=e.left,G=e.top,W=e.right,B=e.bottom,C=parseFloat(u[0]),x=parseFloat(u[1]),k=parseFloat(u[2]),U=((O=parseFloat(u[3]))-x)*l,H=(k-C)*p;270==c?(R=G*H/p+C,D=W*U/l+x,M=k-B*H/p,F=O-V*U/l):180==c?(R=W*H/p+C,D=B*U/l+x,M=k-V*H/p,F=O-G*U/l):90==c?(R=B*H/p+C,D=V*U/l+x,M=k-G*H/p,F=O-W*U/l):(R=V*H/p+C,D=G*U/l+x,M=k-W*H/p,F=O-B*U/l),Item.set("prop:crop",e.left.toFixed(6)+","+e.top.toFixed(6)+","+e.right.toFixed(6)+","+e.bottom.toFixed(6),t._id).then(function(){return Item.set("prop:pos",R.toFixed(6)+","+D.toFixed(6)+","+M.toFixed(6)+","+F.toFixed(6),t._id)}).then(function(){n(t)})})}else r("Error setting cropping, insufficient properties (left, top, right, bottom)")})},e.prototype.bringForward=function(){var e=this;return new Promise(function(t){Item.set("prop:zorder","+",e._id).then(function(){t(e)})})},e.prototype.sendBackward=function(){var e=this;return new Promise(function(t){Item.set("prop:zorder","-",e._id).then(function(){t(e)})})},e.prototype.bringToFront=function(){var e=this;return new Promise(function(t){var n=0,r=-1,o=0;Scene.searchScenesByItemId(e._id).then(function(e){return e.getItems()}).then(function(i){n=i.length;for(a=0;a<n;++a)if(i[a]._id===e._id){r=a;break}n>0&&r>-1&&(o=n-1-r);for(var s=[],a=o-1;a>=0;a--)s.push((e._id,new Promise(function(t){Item.set("prop:zorder","+",e._id).then(function(){t()})})));Promise.all(s).then(function(){t(e)})})})},e.prototype.sendToBack=function(){var e=this;return new Promise(function(t){var n=0,r=-1,o=0;Scene.searchScenesByItemId(e._id).then(function(e){return e.getItems()}).then(function(i){n=i.length;for(a=0;a<n;++a)if(i[a]._id===e._id){r=a;break}n>0&&r>-1&&(o=r);for(var s=[],a=o-1;a>=0;a--)s.push((e._id,new Promise(function(t){Item.set("prop:zorder","-",e._id).then(function(){t()})})));Promise.all(s).then(function(){t(e)})})})},e}();!function(e){e[e.MAIN=0]="MAIN",e[e.PREVIEW=1]="PREVIEW",e[e.THUMBNAIL=2]="THUMBNAIL"}(exports.ViewTypes||(exports.ViewTypes={}));var Item$1=function(e){function t(t){e.call(this,t),this._isItemCall=!0}return __extends(t,e),t.prototype.on=function(e,n){var r=this;t._emitter.on(e+"_"+this._id,n);var o=versionCompare(getVersion()).is.greaterThanOrEqualTo(itemSubscribeEventVersion);"item-changed"===e&&o&&!Environment.isSourceProps()&&t._subscriptions.indexOf("itempropchange_"+this._id)<0?(t._subscriptions.push("itempropchange_"+this._id),EventManager.subscribe("itempropchange_"+this._id,function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];(o=t._emitter).emit.apply(o,["item-changed_"+r._id].concat(e));var o})):"item-destroyed"===e&&o&&!Environment.isSourceProps()&&t._subscriptions.indexOf("itemdestroyed_"+this._id)<0&&(t._subscriptions.push("itemdestroyed_"+this._id),EventManager.subscribe("itemdestroyed_"+this._id,function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];(o=t._emitter).emit.apply(o,["item-destroyed_"+r._id].concat(e));var o}))},t.prototype.off=function(e,n){t._emitter.off(e+"_"+this._id,n)},t.getItemList=function(){return new Promise(function(e){e(Source.getItemList())})},t.prototype.getView=function(){var e=this;return new Promise(function(t){Item.get("prop:viewid",e._id).then(function(e){var n=exports.ViewTypes.MAIN;if("1"===e){var r;App.getGlobalProperty("preview_editor_opened").then(function(e){n="1"===(r=e)?exports.ViewTypes.PREVIEW:exports.ViewTypes.THUMBNAIL,t(n)})}else t(n)})})},t.prototype.getSceneId=function(){var e=this;return new Promise(function(t){t(Number(e._sceneId)+1)})},t.prototype.toXML=function(){var e=new JSON$1;for(var t in this._xmlparams)({}).hasOwnProperty.call(this._xmlparams,t)&&(e[t]=this._xmlparams[t]);return e.tag="item",e.selfclosing=!0,XML.parseJSON(e)},t.prototype.duplicate=function(e){var t=this;return new Promise(function(n,r){versionCompare(getVersion()).is.lessThan(globalsrcMinVersion)?App.callFunc("additem",t.toXML().toString()).then(function(){n(t)}):e?(e.linked&&Item.set("prop:keeploaded","1",t._id),void 0!==e.scene&&void 0!==e.linked?e.scene instanceof Scene?e.scene.getSceneNumber().then(function(r){App.callFunc("link:"+(e.linked?1:0)+"|s:"+r+"|additem",t.toXML().toString()).then(function(){n(t)})}):r(Error("Invalid parameters")):void 0===e.linked?e.scene instanceof Scene?e.scene.getSceneNumber().then(function(e){App.callFunc("link:0|s:"+e+"|additem",t.toXML().toString()).then(function(){n(t)})}):r(Error("Invalid parameters")):void 0===e.scene&&App.callFunc("link:"+(e.linked?1:0)+"|s:"+t._sceneId+"|additem",t.toXML().toString()).then(function(){n(t)})):App.callFunc("link:0|additem",t.toXML().toString()).then(function(){n(t)})})},t.prototype.unlink=function(){var e=this;return new Promise(function(t){Item.set("prop:globalsrc","0",e._id).then(function(){t(e)})})},t.prototype.getSource=function(){var e=this,t=[],n={},r=[];return new Promise(function(o,i){e.getItemList().then(function(e){for(a=0;a<e.length;a++)for(var i in e[a])"_srcId"===i&&(n[e[a][i]]=e[a]);for(var s in n)n.hasOwnProperty(s)&&t.push(n[s]);if(Array.isArray(t))for(var a=0;a<t.length;a++)r.push(function(e){return new Promise(function(n){var r=t[e],o=r._xmlparams,i=Number(r._type);n(i===exports.ItemTypes.GAMESOURCE?new GameSource(o):i!==exports.ItemTypes.HTML&&i!==exports.ItemTypes.FILE||0!==r._name.indexOf("Video Playlist")||""===r.FilePlaylist?i===exports.ItemTypes.HTML?new HtmlSource(o):i===exports.ItemTypes.SCREEN?new ScreenSource(o):i===exports.ItemTypes.BITMAP||i===exports.ItemTypes.FILE&&/\.gif$/.test(r.item)?new ImageSource(o):i===exports.ItemTypes.FILE&&!1===/\.(gif|xbs)$/.test(r.item)&&!1===/^(rtsp|rtmp):\/\//.test(r.item)?new MediaSource(o):Number(r.type)===exports.ItemTypes.LIVE&&-1===r.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new CameraSource(o):Number(r.type)===exports.ItemTypes.LIVE&&-1!==r.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new AudioSource(o):Number(r.type)===exports.ItemTypes.FLASHFILE?new FlashSource(o):new Source(o):new VideoPlaylistSource(o))})}(a));Promise.all(r).then(function(e){o(e[0])})})})},t._emitter=new EventEmitter,t._subscriptions=[],t}(Source);applyMixins(Item$1,[iSource,ItemLayout]);var ItemColor=function(){function e(){}return e.prototype.getTransparency=function(){var e=this;return new Promise(function(t){Item.get("prop:alpha",e._id).then(function(e){t(Number(e))})})},e.prototype.setTransparency=function(e){var t=this;return new Promise(function(n,r){e<0||e>255?r(RangeError("Transparency may only be in the range 0 to 255.")):Item.set("prop:alpha",String(e),t._id).then(function(){n(t)})})},e.prototype.getBrightness=function(){var e=this;return new Promise(function(t){Item.get("prop:cc_brightness",e._id).then(function(e){t(Number(e))})})},e.prototype.setBrightness=function(e){var t=this;return new Promise(function(n,r){e<-100||e>100?r(RangeError("Brightness may only be in the range -100 to 100.")):Item.set("prop:cc_brightness",String(e),t._id).then(function(){n(t)})})},e.prototype.getContrast=function(){var e=this;return new Promise(function(t){Item.get("prop:cc_contrast",e._id).then(function(e){t(Number(e))})})},e.prototype.setContrast=function(e){var t=this;return new Promise(function(n,r){e<-100||e>100?r(RangeError("Contrast may only be in the range -100 to 100.")):Item.set("prop:cc_contrast",String(e),t._id).then(function(){n(t)})})},e.prototype.getHue=function(){var e=this;return new Promise(function(t){Item.get("prop:cc_hue",e._id).then(function(e){t(Number(e))})})},e.prototype.setHue=function(e){var t=this;return new Promise(function(n,r){e<-180||e>180?r(RangeError("Contrast may only be in the range -180 to 180.")):Item.set("prop:cc_hue",String(e),t._id).then(function(){n(t)})})},e.prototype.getSaturation=function(){var e=this;return new Promise(function(t){Item.get("prop:cc_saturation",e._id).then(function(e){t(Number(e))})})},e.prototype.setSaturation=function(e){var t=this;return new Promise(function(n,r){e<-100||e>100?r(RangeError("Saturation may only be in the range -100 to 100")):Item.set("prop:cc_saturation",String(e),t._id).then(function(){n(t)})})},e.prototype.getBorderColor=function(){var e=this;return new Promise(function(t){Item.get("prop:border",e._id).then(function(e){var n;if("0"===e)n=Color.fromTransparent();else{var r=Number(e)-2147483648;n=Color.fromBGRInt(r)}t(n)})})},e.prototype.setBorderColor=function(e){var t=this;return new Promise(function(n,r){var o;o=e.isTransparent()?"0":String(e.getIbgr()-2147483648),Item.set("prop:border",o,t._id).then(function(){n(t)})})},e.prototype.isFullDynamicColorRange=function(){var e=this;return new Promise(function(t){Item.get("prop:cc_dynamicrange",e._id).then(function(e){t("1"===e)})})},e.prototype.setFullDynamicColorRange=function(e){var t=this;return new Promise(function(n,r){"boolean"!=typeof e?r(TypeError("Parameter should be boolean.")):Item.set("prop:cc_dynamicrange",e?"1":"0",t._id).then(function(){n(t)})})},e}();!function(e){e[e.LEGACY=0]="LEGACY",e[e.COLORKEY=1]="COLORKEY",e[e.RGBKEY=2]="RGBKEY"}(exports.KeyingType||(exports.KeyingType={})),function(e){e[e.RED=0]="RED",e[e.GREEN=1]="GREEN",e[e.BLUE=2]="BLUE"}(exports.ChromaPrimaryColors||(exports.ChromaPrimaryColors={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=1]="LOW",e[e.HIGH=2]="HIGH"}(exports.ChromaAntiAliasLevel||(exports.ChromaAntiAliasLevel={}));var ItemChroma=function(){function e(){}return e.prototype.isChromaEnabled=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromakey",e._id).then(function(e){t("1"===e)})})},e.prototype.setChromaEnabled=function(e){var t=this;return new Promise(function(n,r){"boolean"!=typeof e?r(TypeError("Parameter should be boolean.")):Item.set("prop:key_chromakey",e?"1":"0",t._id).then(function(){n(t)})})},e.prototype.getKeyingType=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromakeytype",e._id).then(function(e){t(Number(e))})})},e.prototype.setKeyingType=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use a KeyingType value as the parameter.")):e<0||e>2?r(RangeError("Use a KeyingType value as the parameter.")):Item.set("prop:key_chromakeytype",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaAntiAliasLevel=function(){var e=this;return new Promise(function(t){Item.get("prop:key_antialiasing",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaAntiAliasLevel=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use a ChromaAntiAliasLevel value as the parameter.")):e<0||e>2?r(RangeError("Use a ChromaAntiAliasLevel value as the parameter.")):Item.set("prop:key_antialiasing",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaLegacyBrightness=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromabr",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaLegacyBrightness=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use an integer as the parameter.")):e<0||e>255?r(RangeError("Valid value is an integer from 0-255.")):Item.set("prop:key_chromabr",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaLegacySaturation=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromasat",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaLegacySaturation=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use an integer as the parameter.")):e<0||e>255?r(RangeError("Valid value is an integer from 0-255.")):Item.set("prop:key_chromasat",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaLegacyHue=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromahue",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaLegacyHue=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use an integer as the parameter.")):e<0||e>180?r(RangeError("Valid value is an integer from 0-180.")):Item.set("prop:key_chromahue",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaLegacyThreshold=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromarang",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaLegacyThreshold=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use an integer as the parameter.")):e<0||e>255?r(RangeError("Valid value is an integer from 0-255.")):Item.set("prop:key_chromarang",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaLegacyAlphaSmoothing=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromaranga",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaLegacyAlphaSmoothing=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use an integer as the parameter.")):e<0||e>255?r(RangeError("Valid value is an integer from 0-255.")):Item.set("prop:key_chromaranga",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaRGBKeyPrimaryColor=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromargbkeyprimary",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaRGBKeyPrimaryColor=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use a ChromaPrimaryColors value as the parameter.")):e<0||e>2?r(RangeError("Use a ChromaPrimaryColors value as the parameter.")):Item.set("prop:key_chromargbkeyprimary",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaRGBKeyThreshold=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromargbkeythresh",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaRGBKeyThreshold=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use an integer as the parameter.")):e<0||e>255?r(RangeError("Valid value is an integer from 0-255.")):Item.set("prop:key_chromargbkeythresh",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaRGBKeyExposure=function(){var e=this;return new Promise(function(t){Item.get("prop:key_chromargbkeybalance",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaRGBKeyExposure=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use an integer as the parameter.")):e<0||e>255?r(RangeError("Valid value is an integer from 0-255.")):Item.set("prop:key_chromargbkeybalance",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaColorKeyThreshold=function(){var e=this;return new Promise(function(t){Item.get("prop:key_colorrang",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaColorKeyThreshold=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use an integer as the parameter.")):e<0||e>255?r(RangeError("Valid value is an integer from 0-255.")):Item.set("prop:key_colorrang",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaColorKeyExposure=function(){var e=this;return new Promise(function(t){Item.get("prop:key_colorranga",e._id).then(function(e){t(Number(e))})})},e.prototype.setChromaColorKeyExposure=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use an integer as the parameter.")):e<0||e>255?r(RangeError("Valid value is an integer from 0-255.")):Item.set("prop:key_colorranga",String(e),t._id).then(function(){n(t)})})},e.prototype.getChromaColorKeyColor=function(){var e=this;return new Promise(function(t){Item.get("prop:key_colorrgb",e._id).then(function(e){var n=Color.fromBGRString(e);t(n)})})},e.prototype.setChromaColorKeyColor=function(e){var t=this;return new Promise(function(n){Item.set("prop:key_colorrgb",String(e.getIbgr()),t._id).then(function(){n(t)})})},e}();!function(e){e[e.NONE=0]="NONE",e[e.SHAPE=1]="SHAPE",e[e.FILE_BIND_TO_SOURCE=2]="FILE_BIND_TO_SOURCE",e[e.FILE_BIND_TO_STAGE=3]="FILE_BIND_TO_STAGE"}(exports.MaskEffect||(exports.MaskEffect={}));var _DEFAULT_EFFECT_VALUES={MASK_EFFECT:exports.MaskEffect.NONE,BORDER_RADIUS:0,BORDER_THICKNESS:0,BORDER_OPACITY:100,BORDER_COLOR:Color.fromRGBString("#FFFFFF"),SHADOW_COLOR:Color.fromRGBString("#FFFFFF"),SHADOW_THICKNESS:0,SHADOW_BLUR:0,SHADOW_OPACITY:100,SHADOW_OFFSET_X:0,SHADOW_OFFSET_Y:0,FILE_MASK:"",FILE_MASK_GUIDE:!1},_DEFAULT_EDGE_EFFECT_CONFIG="0,1.00,1.00,1.00,1|1,0,0,0,1|2,0,0,0,0|3,1.00,1.00,1.00,1",ItemEffect=function(){function e(){}return e.prototype._convertToHex=function(e){var t=parseInt(String(255*Number(e))).toString(16);return t.length<2&&(t="0"+t),t},e.prototype._getEdgeEffectValue=function(e){var t=this;return new Promise(function(n,r){Item.get("prop:edgeeffectcfg",t._id).then(function(t){if(""!==t&&null!==t){var o=t.split("|"),i=e.arrayIndex,s=e.indIndex;if(void 0!==o[i]){var a=o[i].split(",");if(Array.isArray(s)){for(var c=[],u=0;u<s.length;++u){var p=s[u];c.push(a[p])}n(c)}else n(a[s])}else r(RangeError("Invalid parameter. Array index given not included."))}else r(ReferenceError("Edge effect configuration not set."))})})},e.prototype._setEdgeEffectValue=function(e){var t=this;return new Promise(function(n,r){Item.get("prop:edgeeffectcfg",t._id).then(function(o){for(var i,s=[],a=(i=""!==o&&null!==o?o:_DEFAULT_EDGE_EFFECT_CONFIG).split("|"),c=a.length,u=0;u<c;++u)s.push(a[u].split(","));var p=e.arrayIndex,l=e.indIndex,m=e.value;if(void 0!==s[p]){var d=s[p];if(Array.isArray(l))for(var f=0;f<l.length;++f)d[l[f]]=m[f];else d[l]=m;s[p]=d;for(var h="",g=0;g<s.length;++g)h+=s[g].toString(),g!==s.length-1&&(h+="|");Item.set("prop:edgeeffectcfg",h,t._id).then(function(){n(t)})}else r(RangeError("Invalid parameter. Array index given not included."))})})},e.prototype._getRGBArray=function(e){var t=e.getRgb();return[parseInt(t.substring(0,2),16)/255,parseInt(t.substring(2,4),16)/255,parseInt(t.substring(4),16)/255]},e.prototype.getMaskEffect=function(){var e=this;return new Promise(function(t){Item.get("prop:edgeeffectid",e._id).then(function(n){"border"===n?t(exports.MaskEffect.SHAPE):Item.get("prop:edgeeffectmaskmode",e._id).then(function(e){t("1"===e||"3"===e?exports.MaskEffect.FILE_BIND_TO_SOURCE:"2"===e||"4"===e?exports.MaskEffect.FILE_BIND_TO_STAGE:_DEFAULT_EFFECT_VALUES.MASK_EFFECT)})})})},e.prototype.setMaskEffect=function(e){var t=this;return new Promise(function(n,r){"number"!=typeof e?r(TypeError("Use a MaskEffect value as the parameter.")):e<0||e>3?r(RangeError("Use a MaskEffect value as the parameter.")):1===e?Item.set("prop:edgeeffectmaskmode","0",t._id).then(function(){return Item.set("prop:edgeeffectid","border",t._id)}).then(function(){n(t)}):Item.set("prop:edgeeffectid","",t._id).then(function(){return 2===e||3===e?e-=1:e=0,Item.set("prop:edgeeffectmaskmode",String(e),t._id)}).then(function(){n(t)})})},e.prototype.getBorderEffectRadius=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=1,n.indIndex=1,e._getEdgeEffectValue(n).then(function(e){t(100*Number(e))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.BORDER_RADIUS)})})},e.prototype.setBorderEffectRadius=function(e){var t=this;return new Promise(function(n,r){if("number"!=typeof e)r(TypeError("Use a number as the parameter."));else if(e<0||e>100)r(RangeError("Valid value is a number from 0 - 100."));else{var o={};o.arrayIndex=1,o.indIndex=1,o.value=e/100,t._setEdgeEffectValue(o).then(function(){n(t)})}})},e.prototype.getBorderEffectThickness=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=1,n.indIndex=2,e._getEdgeEffectValue(n).then(function(e){t(100*Number(e))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.BORDER_THICKNESS)})})},e.prototype.setBorderEffectThickness=function(e){var t=this;return new Promise(function(n,r){if("number"!=typeof e)r(TypeError("Use a number as the parameter."));else if(e<0||e>100)r(RangeError("Valid value is a number from 0 - 100."));else{var o={};o.arrayIndex=1,o.indIndex=2,o.value=e/100,t._setEdgeEffectValue(o).then(function(){n(t)})}})},e.prototype.getBorderEffectOpacity=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=0,n.indIndex=4,e._getEdgeEffectValue(n).then(function(e){t(100*Number(e))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.BORDER_OPACITY)})})},e.prototype.setBorderEffectOpacity=function(e){var t=this;return new Promise(function(n,r){if("number"!=typeof e)r(TypeError("Use a number as the parameter."));else if(e<0||e>100)r(RangeError("Valid value is a number from 0 - 100."));else{var o={};o.arrayIndex=0,o.indIndex=4,o.value=e/100,t._setEdgeEffectValue(o).then(function(){n(t)})}})},e.prototype.getBorderEffectColor=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=0,n.indIndex=[1,2,3],e._getEdgeEffectValue(n).then(function(n){t(Color.fromRGBString("#"+e._convertToHex(n[0])+e._convertToHex(n[1])+e._convertToHex(n[2])))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.BORDER_COLOR)})})},e.prototype.setBorderEffectColor=function(e){var t=this;return new Promise(function(n,r){var o={};o.arrayIndex=0,o.indIndex=[1,2,3],o.value=t._getRGBArray(e),t._setEdgeEffectValue(o).then(function(){n(t)})})},e.prototype.getShadowEffectColor=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=3,n.indIndex=[1,2,3],e._getEdgeEffectValue(n).then(function(n){t(Color.fromRGBString("#"+e._convertToHex(n[0])+e._convertToHex(n[1])+e._convertToHex(n[2])))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.SHADOW_COLOR)})})},e.prototype.setShadowEffectColor=function(e){var t=this;return new Promise(function(n,r){var o={};o.arrayIndex=3,o.indIndex=[1,2,3],o.value=t._getRGBArray(e),t._setEdgeEffectValue(o).then(function(){n(t)})})},e.prototype.getShadowEffectThickness=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=1,n.indIndex=3,e._getEdgeEffectValue(n).then(function(e){t(100*Number(e))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.SHADOW_THICKNESS)})})},e.prototype.setShadowEffectThickness=function(e){var t=this;return new Promise(function(n,r){if("number"!=typeof e)r(TypeError("Use a number as the parameter."));else if(e<0||e>100)r(RangeError("Valid value is a number from 0 - 100."));else{var o={};o.arrayIndex=1,o.indIndex=3,o.value=e/100,t._setEdgeEffectValue(o).then(function(){n(t)})}})},e.prototype.getShadowEffectBlur=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=2,n.indIndex=3,e._getEdgeEffectValue(n).then(function(e){t(100*Number(e))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.SHADOW_BLUR)})})},e.prototype.setShadowEffectBlur=function(e){var t=this;return new Promise(function(n,r){if("number"!=typeof e)r(TypeError("Use a number as the parameter."));else if(e<0||e>100)r(RangeError("Valid value is a number from 0 - 100."));else{var o={};o.arrayIndex=2,o.indIndex=3,o.value=e/100,t._setEdgeEffectValue(o).then(function(){n(t)})}})},e.prototype.getShadowEffectOpacity=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=3,n.indIndex=4,e._getEdgeEffectValue(n).then(function(e){t(100*Number(e))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.SHADOW_OPACITY)})})},e.prototype.setShadowEffectOpacity=function(e){var t=this;return new Promise(function(n,r){if("number"!=typeof e)r(TypeError("Use a number as the parameter."));else if(e<0||e>100)r(RangeError("Valid value is a number from 0 - 100."));else{var o={};o.arrayIndex=3,o.indIndex=4,o.value=e/100,t._setEdgeEffectValue(o).then(function(){n(t)})}})},e.prototype.getShadowEffectOffsetX=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=2,n.indIndex=1,e._getEdgeEffectValue(n).then(function(e){t(100*Number(e))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.SHADOW_OFFSET_X)})})},e.prototype.setShadowEffectOffsetX=function(e){var t=this;return new Promise(function(n,r){if("number"!=typeof e)r(TypeError("Use a number as the parameter."));else if(e<-100||e>100)r(RangeError("Valid value is a number from -100 to 100."));else{var o={};o.arrayIndex=2,o.indIndex=1,o.value=e/100,t._setEdgeEffectValue(o).then(function(){n(t)})}})},e.prototype.getShadowEffectOffsetY=function(){var e=this;return new Promise(function(t){var n={};n.arrayIndex=2,n.indIndex=2,e._getEdgeEffectValue(n).then(function(e){t(100*Number(e))}).catch(function(e){t(_DEFAULT_EFFECT_VALUES.SHADOW_OFFSET_Y)})})},e.prototype.setShadowEffectOffsetY=function(e){var t=this;return new Promise(function(n,r){if("number"!=typeof e)r(TypeError("Use a number as the parameter."));else if(e<-100||e>100)r(RangeError("Valid value is a number from -100 to 100."));else{var o={};o.arrayIndex=2,o.indIndex=2,o.value=e/100,t._setEdgeEffectValue(o).then(function(){n(t)})}})},e.prototype.getFileMask=function(){var e=this;return new Promise(function(t){Item.get("prop:edgeeffectmask",e._id).then(function(e){t(e)})})},e.prototype.setFileMask=function(e){var t=this;return new Promise(function(n){Item.set("prop:edgeeffectmask",e,t._id).then(function(){n(t)})})},e.prototype.isFileMaskingGuideVisible=function(){var e=this;return new Promise(function(t,n){Item.get("prop:edgeeffectmaskmode",e._id).then(function(e){"4"===e||"3"===e?t(!0):"2"===e||"1"===e?t(!1):n(new Error("This method is not available if filemasking is not enabled."))})})},e.prototype.showFileMaskingGuide=function(e){var t=this;return new Promise(function(n,r){Item.get("prop:edgeeffectmaskmode",t._id).then(function(n){"1"===n||"3"===n?Item.set("prop:edgeeffectmaskmode",e?"3":"1",t._id):"2"===n||"4"===n?Item.set("prop:edgeeffectmaskmode",e?"4":"2",t._id):r(new Error("This method is not available if filemasking is not enabled."))})})},e}(),ItemTransition=function(){function e(){}return e.prototype.isVisible=function(){var e=this;return new Promise(function(t){Item.get("prop:visible",e._id).then(function(e){t("1"===e)})})},e.prototype.setVisible=function(e){var t=this;return new Promise(function(n){Item.set("prop:visible",e?"1":"0",t._id).then(function(){n(t)})})},e.prototype.getTransition=function(){var e=this;return new Promise(function(t){Item.get("prop:transitionid",e._id).then(function(e){t(""===e?Transition.NONE:Transition[e.toUpperCase()])})})},e.prototype.setTransition=function(e){var t=this;return new Promise(function(n){Item.set("prop:transitionid",e.toString(),t._id).then(function(){n(t)})})},e.prototype.getTransitionTime=function(){var e=this;return new Promise(function(t){Item.get("prop:transitiontime",e._id).then(function(e){t(Number(e))})})},e.prototype.setTransitionTime=function(e){var t=this;return new Promise(function(n,r){e<0||e>6e4?r(RangeError("Transparency may only be in the range 0 to 60000.")):Item.set("prop:transitiontime",String(e),t._id).then(function(){n(t)})})},e}(),GameItem=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Item$1);applyMixins(GameItem,[Item$1,ItemLayout,ItemColor,ItemChroma,ItemTransition,ItemEffect,iSourceGame]);var CameraItem=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.setColorOptionsPinned=function(e){var t=this;return new Promise(function(n){Item.set("prop:cc_pin",e?"1":"0",t._id).then(function(){n(t)})})},t.prototype.getColorOptionsPinned=function(){var e=this;return new Promise(function(t){Item.get("prop:cc_pin",e._id).then(function(e){t("1"===e)})})},t.prototype.setKeyingOptionsPinned=function(e){var t=this;return new Promise(function(n){Item.set("prop:key_pin",e?"1":"0",t._id).then(function(){n(t)})})},t.prototype.getKeyingOptionsPinned=function(){var e=this;return new Promise(function(t){Item.get("prop:key_pin",e._id).then(function(e){t("1"===e)})})},t}(Item$1);applyMixins(CameraItem,[Item$1,ItemLayout,ItemColor,ItemChroma,ItemTransition,Audio,ItemEffect,SourceCamera]);var AudioItem=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Item$1);applyMixins(AudioItem,[SourceAudio,Audio]);var VideoPlaylistItem=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Item$1);applyMixins(VideoPlaylistItem,[ItemLayout,ItemColor,ItemChroma,ItemTransition,SourceConfigurable,SourceVideoPlaylist,SourcePlayback]);var HtmlItem=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Item$1);applyMixins(HtmlItem,[iSourceHtml,ItemLayout,ItemColor,ItemChroma,ItemTransition,SourceConfigurable,Audio,ItemEffect]);var FlashItem=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Item$1);applyMixins(FlashItem,[ItemLayout,ItemColor,ItemChroma,ItemTransition,Audio,ItemEffect,SourceFlash]);var ScreenItem=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Item$1);applyMixins(ScreenItem,[ItemLayout,ItemColor,ItemChroma,ItemTransition,ItemEffect,iSourceScreen]);var ImageItem=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Item$1);applyMixins(ImageItem,[Item$1,ItemLayout,ItemColor,ItemChroma,ItemTransition,ItemEffect]);var MediaItem=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(Item$1);applyMixins(MediaItem,[Item$1,ItemLayout,ItemColor,ItemChroma,ItemTransition,SourcePlayback,Audio,ItemEffect,SourceMedia]);var Scene=function(){function e(e){"number"==typeof e?this._id=e-1:"string"==typeof e&&(this._id=e)}return e._initializeScenePool=function(){if(0===e._scenePool.length)for(var t=0;t<e._maxScenes;t++)e._scenePool[t]=new e(t+1)},e._initializeScenePoolAsync=function(){return new Promise(function(t){App.get("presetcount").then(function(n){e._scenePool=[];var r=Number(n);if(versionCompare(getVersion()).is.lessThan(minVersion)){e._maxScenes=r>12?r:12;for(o=0;o<e._maxScenes;o++)e._scenePool[o]=new e(o+1);e._scenePool.push(new e("i12")),t(e._maxScenes)}else if(r+1!==e._scenePool.length){for(var o=0;o<r;o++)e._scenePool[o]=new e(o+1);e._scenePool.push(new e("i12")),t(r)}})})},e.getSceneCount=function(){return new Promise(function(t){e._initializeScenePoolAsync().then(function(e){t(e)})})},e.getById=function(t){return new Promise(function(n,r){e._initializeScenePoolAsync().then(function(o){if("i12"===t)"i12"===e._scenePool[o]._id?n(e._scenePool[o]):r(Error("Invalid parameter"));else try{t>o||void 0===e._scenePool[t-1]?r(Error("Invalid parameter")):n(e._scenePool[t-1])}catch(e){r(Error("Parameter must be a number"))}})})},e.getByName=function(t){return new Promise(function(n){e._initializeScenePoolAsync().then(function(r){Promise.all(e._scenePool.map(function(n,r){return App.get("presetname:"+r).then(function(n){return t===n?e._scenePool[r]:null})})).then(function(e){for(var t=[],r=0;r<e.length;++r)null!==e[r]&&t.push(e[r]);n(t)})})})},e.getActiveScene=function(){return new Promise(function(t,n){Environment.isSourcePlugin()?n(Error("Not supported on source plugins")):App.get("preset:0").then(function(t){return e.getById(Number(t)+1)}).then(function(e){t(e)})})},e.setActiveScene=function(t){return new Promise(function(n,r){Environment.isSourcePlugin()?r(Error("Not supported on source plugins")):t instanceof e?App.set("preset",String(t._id)).then(function(e){n(e)}):"number"==typeof t?t<1||!Number.isInteger(Number(t))?r(Error("Invalid parameters. Valid range is greater than 0")):App.set("preset",String(t-1)).then(function(e){n(e)}):r(Error("Invalid parameters"))})},e.searchItemsById=function(t){return new Promise(function(n,r){/^{[A-F0-9\-]*}$/i.test(t)?e._initializeScenePoolAsync().then(function(r){var o=null,i=!1,s=[],a=function(e,n,r){return new Promise(function(s){null===o&&e.getItems().then(function(e){i=e.some(function(e){return e._id===t.toUpperCase()&&(o=e,!0)}),s(i||Number(n)===r.length-1?o:null)}).catch(function(e){s(null)})})};e._scenePool.map(function(e,t,n){s.push(a(e,t,n))}),Promise.all(s).then(function(e){n(o)})}):r(Error("Not a valid ID format for items"))})},e.searchScenesByItemId=function(t){return new Promise(function(n,r){/^{[A-F0-9-]*}$/i.test(t)?e._initializeScenePoolAsync().then(function(r){var o=null,i=!1,s=[],a=function(e,n,r){return new Promise(function(s){null===o&&e.getItems().then(function(a){i=a.some(function(n){return n._id===t.toUpperCase()&&(o=e,!0)}),s(i||Number(n)===r.length-1?o:null)}).catch(function(e){s(null)})})};e._scenePool.map(function(e,t,n){s.push(a(e,t,n))}),Promise.all(s).then(function(e){n(o)})}):r(Error("Not a valid ID format for items"))})},e.searchItemsByName=function(e){var t=this;return new Promise(function(n){t.filterItems(function(t,n){n(t._cname===e?!0:t._name===e?!0:t._value===e?!0:!1)}).then(function(e){n(e)})})},e.filterItems=function(t){return new Promise(function(n,r){e._initializeScenePoolAsync().then(function(o){var i=[];if("function"==typeof t)return Promise.all(e._scenePool.map(function(e){return new Promise(function(n){e.getItems().then(function(e){if(0!==e.length)return Promise.all(e.map(function(e){return new Promise(function(n){t(e,function(t){t&&i.push(e),n()})})})).then(function(){n()});n()}).catch(function(){n()})})})).then(function(){n(i)});r(Error("Parameter is not a function"))})})},e.filterScenesByItems=function(t){return new Promise(function(n,r){e._initializeScenePoolAsync().then(function(o){var i=[];if("function"==typeof t)return Promise.all(e._scenePool.map(function(e){return new Promise(function(n){e.getItems().then(function(r){if(0!==r.length)return Promise.all(r.map(function(n){return new Promise(function(r){t(n,function(t){t&&i.push(e),r()})})})).then(function(){n()});n()}).catch(function(){return n()})})})).then(function(){n(i)});r(Error("Parameter is not a function"))})})},e.searchSourcesById=function(t){return new Promise(function(n,r){/^{[A-F0-9\-]*}$/i.test(t)?e._initializeScenePoolAsync().then(function(r){var o=null,i=!1,s=[],a=function(e,n,r){return new Promise(function(s){null===o&&e.getSources().then(function(e){i=e.some(function(e){return e._srcId===t.toUpperCase()&&(o=e,!0)}),s(i||Number(n)===r.length-1?o:null)}).catch(function(e){s(null)})})};e._scenePool.map(function(e,t,n){s.push(a(e,t,n))}),Promise.all(s).then(function(e){for(var t=[],r=0;r<e.length;r++)null!==e[r]&&t.push(e[r]);n(t)})}):r(Error("Not a valid ID format for sources"))})},e.searchScenesBySourceId=function(t){return new Promise(function(n,r){/^{[A-F0-9-]*}$/i.test(t)?e._initializeScenePoolAsync().then(function(r){var o=null,i=!1,s=[],a=function(e,n,r){return new Promise(function(s){null===o&&e.getSources().then(function(a){i=a.some(function(n){return n._srcId===t.toUpperCase()&&(o=e,!0)}),s(i||Number(n)===r.length-1?o:null)}).catch(function(e){s(null)})})};e._scenePool.map(function(e,t,n){s.push(a(e,t,n))}),Promise.all(s).then(function(e){for(var t=[],r=0;r<e.length;r++)null!==e[r]&&t.push(e[r]);n(t)})}):r(Error("Not a valid ID format for sources"))})},e.searchSourcesByName=function(e){var t=this;return new Promise(function(n){t.filterSources(function(t,n){t.getCustomName().then(function(r){if(!r.match(e))return t.getName();n(!0)}).then(function(r){if(void 0!==r){if(!r.match(e))return t.getValue();n(!0)}}).then(function(t){void 0!==t&&n(t.toString().match(e)?!0:!1)})}).then(function(e){n(e)})})},e.filterSources=function(t){return new Promise(function(n,r){e._initializeScenePoolAsync().then(function(o){var i=[];if("function"==typeof t)return Promise.all(e._scenePool.map(function(e){return new Promise(function(n){e.getSources().then(function(e){if(0!==e.length)return Promise.all(e.map(function(e){return new Promise(function(n){t(e,function(t){t&&i.push(e),n()})})})).then(function(){n()});n()}).catch(function(){n()})})})).then(function(){n(i)});r(Error("Parameter is not a function"))})})},e.filterScenesBySources=function(t){return new Promise(function(n,r){e._initializeScenePoolAsync().then(function(o){var i=[];if("function"==typeof t)return Promise.all(e._scenePool.map(function(e){return new Promise(function(n){e.getSources().then(function(r){if(0!==r.length)return Promise.all(r.map(function(n){return new Promise(function(r){t(n,function(t){t&&i.push(e),r()})})})).then(function(){n()});n()})})})).then(function(){n(i)});r(Error("Parameter is not a function"))})})},e.initializeScenes=function(){return new Promise(function(e,t){Environment.isSourcePlugin()?t(Error("function is not available for source")):versionCompare(getVersion()).is.lessThan(minVersion)?App.get("presetcount").then(function(t){Number(t)<12?App.set("presetconfig:11",'<placement name="Scene 12" defpos="0" />').then(function(t){e(t)}):e(!0)}):e(!0)})},e.prototype.getSources=function(){var e=this;return new Promise(function(t,n){App.getAsList("presetconfig:"+e._id).then(function(n){var r=[],o={},i=[];if(Array.isArray(n))for(var s=0;s<n.length;s++)n[s].sceneId=e._id,r.push(function(e){return new Promise(function(t){var r=n[e],o=Number(r.type);t(o===exports.ItemTypes.GAMESOURCE?new GameSource(r):o!==exports.ItemTypes.HTML&&o!==exports.ItemTypes.FILE||0!==r.name.indexOf("Video Playlist")||""===r.FilePlaylist?o===exports.ItemTypes.HTML?new HtmlSource(r):o===exports.ItemTypes.SCREEN?new ScreenSource(r):o===exports.ItemTypes.BITMAP||o===exports.ItemTypes.FILE&&/\.gif$/.test(r.item)?new ImageSource(r):o===exports.ItemTypes.FILE&&!1===/\.(gif|xbs)$/.test(r.item)&&!1===/^(rtsp|rtmp):\/\//.test(r.item)?new MediaSource(r):Number(r.type)===exports.ItemTypes.LIVE&&-1===r.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new CameraSource(r):Number(r.type)===exports.ItemTypes.LIVE&&-1!==r.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new AudioSource(r):Number(r.type)===exports.ItemTypes.FLASHFILE?new FlashSource(r):new Source(r):new VideoPlaylistSource(r))})}(s));Promise.all(r).then(function(e){for(var n=0;n<e.length;n++)for(var r in e[n])"_srcId"===r&&(o[e[n][r]]=e[n]);for(var s in o)o.hasOwnProperty(s)&&i.push(o[s]);t(i)})}).catch(function(e){n(e)})})},e.prototype.getSceneNumber=function(){var e=this;return new Promise(function(t){t("number"==typeof e._id?Number(e._id)+1:e._id)})},e.prototype.getName=function(){var e=this;return new Promise(function(t){App.get("presetname:"+e._id).then(function(e){t(e)})})},e.prototype.setName=function(e){var t=this;return new Promise(function(n,r){Environment.isSourcePlugin()?r(Error("Scene names are readonly for source plugins.")):App.set("presetname:"+t._id,e).then(function(e){n(e)})})},e.prototype.getItems=function(){var e=this;return new Promise(function(t,n){App.getAsList("presetconfig:"+e._id).then(function(n){var r=[];if(Array.isArray(n))for(var o=0;o<n.length;o++)n[o].sceneId=e._id,r.push(function(e){return new Promise(function(t){var r=n[e],o=Number(r.type);t(o===exports.ItemTypes.GAMESOURCE?new GameItem(r):o!==exports.ItemTypes.HTML&&o!==exports.ItemTypes.FILE||0!==r.name.indexOf("Video Playlist")||""===r.FilePlaylist?o===exports.ItemTypes.HTML?new HtmlItem(r):o===exports.ItemTypes.SCREEN?new ScreenItem(r):o===exports.ItemTypes.BITMAP||o===exports.ItemTypes.FILE&&/\.gif$/.test(r.item)?new ImageItem(r):o===exports.ItemTypes.FILE&&!1===/\.(gif|xbs)$/.test(r.item)&&!1===/^(rtsp|rtmp):\/\//.test(r.item)?new MediaItem(r):Number(r.type)===exports.ItemTypes.LIVE&&-1===r.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new CameraItem(r):Number(r.type)===exports.ItemTypes.LIVE&&-1!==r.item.indexOf("{33D9A762-90C8-11D0-BD43-00A0C911CE86}")?new AudioItem(r):Number(r.type)===exports.ItemTypes.FLASHFILE?new FlashItem(r):new Item$1(r):new VideoPlaylistItem(r))})}(o));Promise.all(r).then(function(e){t(e)})}).catch(function(e){n(e)})})},e.prototype.isEmpty=function(){var e=this;return new Promise(function(t){App.get("presetisempty:"+e._id).then(function(e){t("1"===e)})})},e.prototype.setItemOrder=function(t){var n=this;return new Promise(function(r,o){if(Environment.isSourcePlugin())o(Error("not available for source plugins"));else{t.reverse();var i=[];e.getActiveScene().then(function(e){return t.every(function(e){return e instanceof Source||e instanceof Item$1})?new Promise(function(r){var o=[];for(var s in t)o.push(function(e){return new Promise(function(r){t[e].getId().then(function(t){i[e]=t,r(n)})})}(s));Promise.all(o).then(function(){return e.getSceneNumber()}).then(function(e){r(e)})}):(i=t,e.getSceneNumber())}).then(function(e){if(Number(e)-1===n._id&&(Environment.isSourceProps()||Environment.isExtension))exec("SourcesListOrderSave",String(exports.ViewTypes.MAIN),i.join(",")),r(n);else{var t;n.getName().then(function(e){return t=e,App.getAsList("presetconfig:"+n._id)}).then(function(e){var s=new JSON$1;if(s.children=[],s.tag="placement",s.name=t,Array.isArray(e)){for(var a=["name","cname","item"],c=0;c<e.length;c++){for(var u=0;u<a.length;u++)e[c][a[u]]=e[c][a[u]].replace(/\\/g,"\\\\"),e[c][a[u]]=e[c][a[u]].replace(/"/g,"&quot;");s.children[i.indexOf(e[c].id)]=e[c]}App.set("presetconfig:"+n._id,XML.parseJSON(s).toString().replace(/\\\\/g,"\\")).then(function(){r(n)})}else o(Error("Scene does not have any source"))})}})}})},e._maxScenes=12,e._scenePool=[],e}(),Dll=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.load=function(e){return new Promise(function(t){exec("LoadDll",e.join(",")).then(function(e){t(e)})})},t.on=function(e,n){t._emitter.on(e,n)},t.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];n.unshift(e),t._emitter.emit.apply(t._emitter,n)},t.call=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Promise(function(r,o){n.unshift(e),n.unshift("CallDll"),exec.apply(t,n).then(function(e){void 0!==e?r(e):o("DLL call not accessible.")})})},t.callEx=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new Promise(function(r,o){n.unshift(e),n.unshift("CallDllEx"),exec.apply(t,n).then(function(e){void 0!==e?r(e):o("DLL call not accessible.")})})},t.isAccessGranted=function(){return new Promise(function(e){exec("CheckDllGrant").then(function(t){e("1"===t)})})},t._emitter=new t,t}(EventEmitter),oldUpdateLocalProperty=window.UpdateLocalProperty;window.UpdateLocalProperty=function(e,t){"prop:dlldogrant"===e&&("1"===t?Dll.emit("access-granted"):Dll.emit("access-revoked")),"function"==typeof oldUpdateLocalProperty&&oldUpdateLocalProperty(e,t)};var oldSetdlldogrant=window.Setdlldogrant;window.Setdlldogrant=function(e){"1"===e?Dll.emit("access-granted"):Dll.emit("access-revoked"),"function"==typeof oldSetdlldogrant&&oldSetdlldogrant(e)};var Url=function(){function e(e){this._url=e}return e.prototype._getUrl=function(){var e=this;return new Promise(function(t,n){/^https?:\/\//i.test(e._url)?t(e._url):/[a-z]+:\/\//i.test(e._url)?n(new Error("You may only add HTTP or HTTPS URLs to the stage.")):t("http://"+e._url)})},e.prototype.addToScene=function(e){var t=this;return new Promise(function(n,r){var o="";("number"==typeof e||e instanceof Scene?new Promise(function(t,n){Scene.getSceneCount().then(function(r){if("number"==typeof e){var i=Math.floor(e);i>r||0===i?n(new Error("Scene not existing.")):(o="s:"+(i-1)+"|",t())}else e.getSceneNumber().then(function(e){e>r||0===e?n(new Error("Scene not existing.")):(o="s:"+(e-1)+"|",t())})})}):void 0===e?Promise.resolve():Promise.reject(new Error("Optional parameter 'scene' only accepts integers or an XJS.Scene object"))).then(function(){return t._getUrl()}).then(function(e){return App.callFunc(o+"addurl",e)}).then(function(){n(!0)}).catch(function(e){r(e)})})},e}(),Screen=function(){function e(){}return e.prototype.addToScene=function(e){return new Promise(function(t,n){var r="";("number"==typeof e||e instanceof Scene?new Promise(function(t,n){Scene.getSceneCount().then(function(o){if("number"==typeof e){var i=Math.floor(e);i>o||0===i?n(new Error("Scene not existing.")):(r="s:"+(i-1)+"|",t())}else e.getSceneNumber().then(function(e){e>o||0===e?n(new Error("Scene not existing.")):(r="s:"+(e-1)+"|",t())})})}):void 0===e?Promise.resolve():Promise.reject(new Error("Optional parameter 'scene' only accepts integers or an XJS.Scene object"))).then(function(){exec("AppCallFunc",r+"addscreen"),t(!0)}).catch(function(e){n(e)})})},e}(),File=function(){function e(e){this._path=e}return e.prototype.addToScene=function(e){var t=this;return new Promise(function(n,r){var o="";("number"==typeof e||e instanceof Scene?new Promise(function(t,n){Scene.getSceneCount().then(function(r){if("number"==typeof e){var i=Math.floor(e);i>r||0===i?n(new Error("Scene not existing.")):(o="s:"+(i-1)+"|",t())}else e.getSceneNumber().then(function(e){e>r||0===e?n(new Error("Scene not existing.")):(o="s:"+(e-1)+"|",t())})})}):void 0===e?Promise.resolve():Promise.reject(new Error("Optional parameter 'scene' only accepts integers or an XJS.Scene object"))).then(function(){return App.callFunc(o+"addfile",t._path)}).then(function(){n(!0)}).catch(function(e){r(e)})})},e}(),VideoPlaylist=function(){function e(e){this._id=0,this._fileplaylist="",this._playlist=e}return e.prototype.toXML=function(){var e=this;return new Promise(function(t,n){var r=e._playlist.map(function(e){return new Promise(function(t){IO.getVideoDuration(e).then(function(e){t(e)}).catch(function(e){t(e)})})});Promise.all(r).then(function(r){var o=new JSON$1,i=!1;if(e._playlist.length){for(var s=0;s<e._playlist.length;s++){if("object"===babelHelpers.typeof(r[s])){i=!0;break}e._fileplaylist+=e._playlist[s]+"*"+s+"*1*"+r[s]+"*100*0*0*0*0*0|"}var a=e;i?n(new Error("One or more files included are invalid.")):App.get("preset:0").then(function(e){return App.get("presetconfig:"+e)}).then(function(e){var n=JSON$1.parse(e).defpos;o.tag="item",o.type="1",o.name="Video Playlist","0"===n?(o.pos_left="0",o.pos_top="0",o.pos_right="0.5",o.pos_bottom="0.5"):"1"===n?(o.pos_left="0.5",o.pos_top="0",o.pos_right="1",o.pos_bottom="0.5"):"2"===n?(o.pos_left="0",o.pos_top="0.5",o.pos_right="0.5",o.pos_bottom="1"):"3"===n?(o.pos_left="0.5",o.pos_top="0.5",o.pos_right="1",o.pos_bottom="1"):(o.pos_left="0.25",o.pos_top="0.25",o.pos_right="0.75",o.pos_bottom="0.75"),o.item=a._playlist[0]+"*0",o.FilePlaylist=a._fileplaylist,t(XML.parseJSON(o))})}else n(new Error("No media file included."))})})},e.prototype.addToScene=function(e){var t=this;return new Promise(function(n,r){if(Environment.isSourcePlugin())r(new Error("This function is not available to sources."));else{var o="";("number"==typeof e||e instanceof Scene?new Promise(function(t,n){Scene.getSceneCount().then(function(r){if("number"==typeof e){var i=Math.floor(e);i>r||0===i?n(new Error("Scene not existing.")):(o="s:"+(i-1)+"|",t())}else e.getSceneNumber().then(function(e){e>r||0===e?n(new Error("Scene not existing.")):(o="s:"+(e-1)+"|",t())})})}):void 0===e?Promise.resolve():Promise.reject(new Error("Optional parameter 'scene' only accepts integers or an XJS.Scene object"))).then(function(){return t.toXML()}).then(function(e){return App.callFunc(o+"additem"," "+e)}).then(function(){n(!0)}).catch(function(e){r(e)})}})},e}(),SourcePluginWindow=function(e){function t(){if(e.call(this),!Environment.isSourcePlugin())throw new Error("SourcePluginWindow class is only available for source plugins");this.on("message-source",function(e){void 0!==e.request&&("saveConfig"===e.request?this.emit("save-config",this._hideGlobalConfig(e.data)):"applyConfig"===e.request&&this.emit("apply-config",this._hideGlobalConfig(e.data)))}),t._instance=this,t._subscriptions=[]}return __extends(t,e),t.getInstance=function(){return void 0===t._instance&&(t._instance=new t),t._instance},t.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];n.unshift(e);try{t.getInstance().emit.apply(t._instance,n)}catch(e){t._instance.emit.apply(t._instance,n)}},t.on=function(e,n){t.getInstance().on(e,n);var r=versionCompare(getVersion()).is.greaterThanOrEqualTo(deleteSceneEventFixVersion);"scene-delete"===e&&r?t._subscriptions.indexOf("SceneDeleted")<0&&EventManager.subscribe("SceneDeleted",function(n){Environment.isSourcePlugin()&&t.emit(e,""===n.index?null:Number(n.index)+1)}):["set-background-color","scene-load","apply-config","save-config"].indexOf(e)>=0||console.warn('Warning! The event "'+e+'" is not yet supported on this version.')},t.off=function(e,n){t.getInstance().off(e,n)},t.prototype._hideGlobalConfig=function(e){var t=Global.getPersistentConfig();for(var n in t)delete e[n];return e},t._subscriptions=[],t}(EventEmitter);window.MessageSource=function(e){SourcePluginWindow.emit("message-source",JSON.parse(e))},window.SetConfiguration=function(e){try{var t=JSON.parse(e);SourcePluginWindow.emit("apply-config",t),SourcePluginWindow.emit("save-config",t)}catch(e){return}},window.setBackGroundColor=function(e){SourcePluginWindow.emit("set-background-color",e)};var prevOnSceneLoad=window.OnSceneLoad;window.OnSceneLoad=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];Environment.isSourcePlugin()&&SourcePluginWindow.emit("scene-load"),void 0!==prevOnSceneLoad&&prevOnSceneLoad.apply(void 0,e)};var _RESIZE="2",ExtensionWindow=function(e){function t(){if(e.call(this),!Environment.isExtension())throw new Error("ExtensionWindow class is only available for extensions");t._instance=this,t._subscriptions=[]}return __extends(t,e),t.getInstance=function(){return void 0===t._instance&&(t._instance=new t),t._instance},t.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];n.unshift(e);try{t.getInstance().emit.apply(t._instance,n)}catch(e){t._instance.emit.apply(t._instance,n)}},t.on=function(e,n){var r=this;return new Promise(function(o,i){t.getInstance().on(e,n);var s=versionCompare(getVersion()).is.greaterThanOrEqualTo(deleteSceneEventFixVersion),a=versionCompare(getVersion()).is.greaterThanOrEqualTo(addSceneEventFixVersion);if("scene-delete"===e&&s)t._subscriptions.indexOf("SceneDeleted")<0?(t._subscriptions.push("SceneDeleted"),EventManager.subscribe("SceneDeleted",function(n){Environment.isExtension()&&t.emit(e,""===n.index?null:Number(n.index)+1),o(this)})):o(r);else if("scene-add"===e&&a)t._subscriptions.indexOf("OnSceneAddByUser")<0?(t._subscriptions.push("OnSceneAddByUser"),EventManager.subscribe("OnSceneAddByUser",function(n){Scene.getSceneCount().then(function(n){Environment.isExtension()?(t.emit(e,n),o(this)):i(Error("ExtensionWindow class is only available for extensions."))})})):o(r);else if(["sources-list-highlight","sources-list-select","sources-list-update","scene-load"].indexOf(e)>=0)if(["sources-list-highlight","sources-list-select","sources-list-update"].indexOf(e)>=0)try{exec("SourcesListSubscribeEvents",exports.ViewTypes.MAIN.toString()).then(function(e){o(r)})}catch(e){}else o(r);else i(Error('Warning! The event "'+e+'" is not yet supported.'))})},t.off=function(e,n){t.getInstance().off(e,n)},t.resize=function(e,t){App.postMessage(_RESIZE,String(e),String(t))},t.prototype.resize=function(e,t){App.postMessage(_RESIZE,String(e),String(t))},t.setTitle=function(e){return new Promise(function(t){Extension.getInstance().getId().then(function(n){exec("CallHost","setExtensionWindowTitle:"+n,e).then(function(e){t(e)})})})},t.prototype.setTitle=function(e){return new Promise(function(t){Extension.getInstance().getId().then(function(n){exec("CallHost","setExtensionWindowTitle:"+n,e).then(function(e){t(e)})})})},t.setBorder=function(e){App.postMessage("4",String(e))},t.prototype.setBorder=function(e){App.postMessage("4",String(e))},t.close=function(){App.postMessage("1")},t.prototype.close=function(){App.postMessage("1")},t.disableClose=function(){App.postMessage("5","0")},t.prototype.disableClose=function(){App.postMessage("5","0")},t.enableClose=function(){App.postMessage("5","1")},t.prototype.enableClose=function(){App.postMessage("5","1")},t._subscriptions=[],t}(EventEmitter),oldSourcesListUpdate=window.SourcesListUpdate;window.SourcesListUpdate=function(e,t){if(0===Number(e)){var n=JSON$1.parse(decodeURIComponent(t)),r=[],o=[];if(n.children&&n.children.length>0){r=n.children;for(var i=0;i<r.length;i++)o.push(r[i].id)}ExtensionWindow.emit("sources-list-update",o.join(","))}"function"==typeof oldSourcesListUpdate&&oldSourcesListUpdate(e,t)};var oldSourcesListHighlight=window.SourcesListHighlight;window.SourcesListHighlight=function(e,t){0===Number(e)&&ExtensionWindow.emit("sources-list-highlight",""===t?null:t),"function"==typeof oldSourcesListHighlight&&oldSourcesListHighlight(e,t)};var oldSourcesListSelect=window.SourcesListSelect;window.SourcesListSelect=function(e,t){0===Number(e)&&ExtensionWindow.emit("sources-list-select",""===t?null:t),"function"==typeof oldSourcesListSelect&&oldSourcesListSelect(e,t)};var oldOnSceneLoad=window.OnSceneLoad;window.OnSceneLoad=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(Environment.isExtension()){var n=e[0],r=e[1];0===Number(n)&&ExtensionWindow.emit("scene-load",Number(r))}"function"==typeof oldOnSceneLoad&&oldOnSceneLoad.apply(void 0,e)};var dialogProxy,Dialog=function(){function e(){var e=this;if(Environment.isSourcePlugin())throw new Error("Dialogs are not available for source plugins.");if("remote"===Remote.remoteType)throw new Error("Unable to listen to Dialog window events through Remote");this._result=null;var t=function t(n){n.target.removeEventListener(n.type,t),void 0!==dialogProxy&&"undefined"!=typeof Proxy?dialogProxy._result=n.detail:e._result=n.detail,e._resultListener=null};return document.addEventListener("xsplit-dialog-result",t),this._resultListener=t,this}return e.createDialog=function(t){var n=new e;return n._url=t,n},e.createAutoDialog=function(t){if(Environment.isSourceProps())throw new Error("Auto dialogs are not available for config windows.");var n=new e;return n._url=t,n._autoclose=!0,n},e.return=function(e){return new Promise(function(t){void 0!==e?exec("SetDialogResult",e).then(function(e){t(e),exec("Close")}):t(exec("Close"))})},e.prototype.setSize=function(e,t){return void 0===e&&(e=300),void 0===t&&(t=300),this._size=Rectangle.fromDimensions(e,t),this},e.prototype.setTitle=function(e){if(this._autoclose)throw new Error("Autoclosing dialogs cannot use this method.");return this._title=e,this},e.prototype.setBorderOptions=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this._autoclose)throw new Error("Autoclosing dialogs cannot use this method.");return this._showBorder=e,this._resizable=t,this},e.prototype.setButtons=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this._autoclose)throw new Error("Autoclosing dialogs cannot use this method.");return this._minimize=e,this._maximize=t,this},e.prototype.show=function(){var e=this;return new Promise(function(t){e._result=null,e._autoclose?exec("NewAutoDialog",e._url,"",void 0===e._size?void 0:e._size.getWidth()+","+e._size.getHeight()).then(function(n){t(e)}):exec("NewDialog",e._url,"",void 0===e._size?void 0:e._size.toDimensionString(),e._calculateFlags(),e._title).then(function(n){t(e)})})},e.prototype.getResult=function(){var e=this;return new Promise(function(t){if(null!==e._result)t(e._result);else if(null===e._resultListener){var n=function n(r){r.target.removeEventListener(r.type,n),e._result=r.detail,e._resultListener=null,t(e._result)};document.addEventListener("xsplit-dialog-result",n),e._resultListener=n}else"undefined"==typeof Proxy?Object.observe(e,function(e){var n=e.filter(function(e){return"_result"===e.name});void 0!==n&&n.length>0&&t(n[0].object._result)}):dialogProxy=new Proxy(e,{set:function(n,r,o,i){return"_result"===r&&(e._result=o,t(o)),!0}})})},e.prototype.close=function(){return new Promise(function(e){e(exec("CloseDialog"))})},e.prototype._calculateFlags=function(){var e=0;return this._showBorder&&(e+=1),this._resizable&&(e+=4),this._minimize&&(e+=8),this._maximize&&(e+=16),(this._title||this._minimize||this._maximize)&&(e+=2),String(e)},e}(),oldOnDialogResult=window.OnDialogResult;window.OnDialogResult=function(e){(Environment.isSourceProps()||Environment.isExtension())&&document.dispatchEvent(new CustomEvent("xsplit-dialog-result",{detail:e})),"function"==typeof oldOnDialogResult&&oldOnDialogResult(e)},exports.CuePoint=CuePoint,exports.ready=ready,exports.Color=Color,exports.Rectangle=Rectangle,exports.IO=IO,exports.Environment=Environment,exports.App=App$1,exports.StreamInfo=StreamInfo,exports.Output=Output,exports.ChannelManager=ChannelManager,exports.Scene=Scene,exports.Transition=Transition,exports.Dll=Dll,exports.Extension=Extension,exports.Source=Source,exports.CameraSource=CameraSource,exports.GameSource=GameSource,exports.AudioSource=AudioSource,exports.HtmlSource=HtmlSource,exports.FlashSource=FlashSource,exports.ScreenSource=ScreenSource,exports.ImageSource=ImageSource,exports.MediaSource=MediaSource,exports.VideoPlaylistSource=VideoPlaylistSource,exports.Item=Item$1,exports.CameraItem=CameraItem,exports.GameItem=GameItem,exports.AudioItem=AudioItem,exports.HtmlItem=HtmlItem,exports.FlashItem=FlashItem,exports.ScreenItem=ScreenItem,exports.ImageItem=ImageItem,exports.MediaItem=MediaItem,exports.VideoPlaylistItem=VideoPlaylistItem,exports.System=System,exports.AudioDevice=AudioDevice,exports.Game=Game,exports.CameraDevice=CameraDevice,exports.MicrophoneDevice=MicrophoneDevice,exports.Url=Url,exports.Screen=Screen,exports.File=File,exports.VideoPlaylist=VideoPlaylist,exports.SourcePropsWindow=SourcePropsWindow,exports.SourcePluginWindow=SourcePluginWindow,exports.ExtensionWindow=ExtensionWindow,exports.Dialog=Dialog,exports.Remote=Remote,Object.defineProperty(exports,"__esModule",{value:!0})});
